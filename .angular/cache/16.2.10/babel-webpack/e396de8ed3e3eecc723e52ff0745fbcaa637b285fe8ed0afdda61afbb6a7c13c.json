{"ast":null,"code":"import _asyncToGenerator from \"/Users/rohantyagi/Desktop/landing-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport Chart from 'chart.js/auto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/wasm.service\";\nimport * as i2 from \"@angular/fire/compat/storage\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../navigation/navigation.component\";\nimport * as i7 from \"../bcg-matrix/bcg-matrix.component\";\nfunction AdminHomePageComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Profitability Result: \", ctx_r0.profitability, \" %\");\n  }\n}\nfunction AdminHomePageComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"COGS Result: $\", ctx_r1.cogsResult, \"\");\n  }\n}\nfunction AdminHomePageComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Optimal Order Quantity Result: \", ctx_r2.optimalorderQuantity, \"\");\n  }\n}\nfunction AdminHomePageComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Safety Stock Result: \", ctx_r3.safetyStock, \"\");\n  }\n}\nfunction AdminHomePageComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Reorder Point Result: \", ctx_r4.reorderPoint, \"\");\n  }\n}\nconst _c0 = \".homepageTitle[_ngcontent-%COMP%]{text-align:center;font-size:70px}body[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.chart-container[_ngcontent-%COMP%]{width:8%;margin-bottom:20px}.chart[_ngcontent-%COMP%]{height:300px;border:1px solid #ddd}button[_ngcontent-%COMP%]{background-color:#04aa6d;color:#fff;padding:14px 20px;margin:8px 0;border:none;cursor:pointer;width:100%}.output-box[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border:1px solid #ccc;border-radius:5px;background-color:#f5f5f5}.button-container[_ngcontent-%COMP%]{margin-top:20px}.container[_ngcontent-%COMP%]{display:flex;justify-content:center}.column[_ngcontent-%COMP%]{flex:1;padding:1rem}.button-container[_ngcontent-%COMP%]{margin-top:1rem}.output-box[_ngcontent-%COMP%]{margin-top:.5rem}\";\nlet AdminHomePageComponent = /*#__PURE__*/(() => {\n  class AdminHomePageComponent {\n    constructor(wasmService, storage) {\n      this.wasmService = wasmService;\n      this.storage = storage;\n      this.dishName = '';\n      this.ingredient = '';\n      this.ingredientsTxtData = ''; // Text of Text file gotten from firebase\n      this.ingredientsQuantAmtTxtData = ''; // Text of Text file gotten from firebase\n      this.recipeData = [];\n      this.ingredientQuantAmtData = [];\n      // Replace these arrays with your actual data\n      // calculate for all the dishes and get arrays of each point\n      this.dishNames = [];\n      this.foodCosts = [];\n      this.orderingFrequency = [2, 3, 1, 4, 2];\n      this.reorderAlert = [false, true, false, true, false]; // Replace with actual boolean values\n      this.runningLowReminder = [true, false, true, false, true]; // Replace with actual boolean values\n    }\n    // reorderPointChart: any;\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const prods = yield _this.wasmService.createProductQuantityMap();\n        _this.foodCosts = _this.wasmService.productSales;\n        _this.dishNames = _this.wasmService.productNames;\n        _this.foodCostsChart = _this.createBarChart('foodCostsChart', 'Food Costs', _this.foodCosts, 'blue');\n        // this.orderingFrequencyChart = this.createBarChart('orderingFrequencyChart', 'Ordering Frequency', this.orderingFrequency, 'green');\n        // this.reorderAlertChart = this.createBarChart('reorderAlertChart', 'Reorder Alert', this.reorderAlert.map(alert => alert ? 1 : 0), 'red');\n        // this.runningLowReminderChart = this.createBarChart('runningLowReminderChart', 'Running Low Reminder', this.runningLowReminder.map(reminder => reminder ? 1 : 0), 'orange');\n        // this.reorderPointChart = this.createBarChart('reorderPointChart', 'Reorder Point', this.reorderPoint, 'purple');\n      })();\n    }\n    // Function to create a bar chart\n    createBarChart(canvasId, label, data, color) {\n      const canvas = document.getElementById(canvasId);\n      const ctx = canvas.getContext('2d');\n      return new Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels: this.dishNames,\n          datasets: [{\n            label: label,\n            data: data,\n            backgroundColor: color\n          }]\n        },\n        options: {\n          scales: {\n            y: {\n              beginAtZero: true\n            }\n          }\n        }\n      });\n    }\n    getFileFromStorage(filePath) {\n      if (this.checkFileExists(filePath)) {\n        const storageRef = this.storage.ref(filePath);\n        return storageRef.getDownloadURL();\n      }\n    }\n    checkFileExists(filename) {\n      const storageRef = this.storage.ref(filename);\n      storageRef.getDownloadURL().subscribe(url => {\n        console.log(`File ${filename} exists. URL: ${url}`);\n        return true;\n      }, error => {\n        if (error.code === 'storage/object-not-found') {\n          console.log(`File ${filename} does not exist.`);\n        } else {\n          console.error('Error checking file existence:', error);\n        }\n        return false;\n      });\n      return false;\n    }\n    calculateProfitMargin() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        // this.profitabilityResult = 86;\n        // console.log(this.dishName);\n        (yield _this2.wasmService.calculateIngredientDirectCostfromData(_this2.dishName.replace(/\\s+/g, '-'))).subscribe(result => {\n          console.log(\"Why yes\" + _this2.profitability);\n          _this2.profitability = _this2.wasmService.cogs;\n        }, error => {\n          console.error('Error calculating profitability:', error);\n          // Handle errors as needed\n        });\n      })();\n    }\n\n    calculateCOGS() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        if (_this3.wasmService.cogs != 0) {\n          _this3.cogsResult = _this3.wasmService.cogs / _this3.wasmService.dishPrice;\n        } else {\n          (yield _this3.wasmService.calculateIngredientDirectCostfromData(_this3.dishName.replace(/\\s+/g, '-'))).subscribe(result => {\n            console.log(\"Why yes\" + _this3.cogsResult);\n            _this3.cogsResult = result;\n          }, error => {\n            console.error('Error calculating profitability:', error);\n            // Handle errors as needed\n          });\n        }\n      })();\n    }\n\n    calculateOptimalOrderQuantity() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        //get the sales quantity for all dishes with this ingredient which = sales -> sales.csv filtered to find dishes with certain ingredients\n        //get the amount of that ingredient in that dish -> ingredientAmtQuant.txt\n        //orderCost = purchasing cost of that ingredient -> ask Santosh about this\n        // % of sq footage of restaurant dedicated to storage * rental rate\n        if (_this4.wasmService.cogs != 0) {\n          _this4.cogsResult = _this4.wasmService.cogs / _this4.wasmService.dishPrice;\n        } else {\n          yield _this4.wasmService.calculateIngredientOptimalOrderQuantity(_this4.ingredient);\n          _this4.optimalorderQuantity = _this4.wasmService.optOrderQuant;\n        }\n      })();\n    }\n    // Method to handle button click\n    onCalculateProfitMarginClick() {\n      this.calculateProfitMargin();\n    }\n    deleteDish() {\n      // Call your API endpoint with this.dishName, etc.\n      // Handle the response\n    }\n    calculateOrderingFreq() {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        if (_this5.wasmService.orderFreq != 0) {} else {\n          yield _this5.wasmService.calculateOrderingFreq(_this5.ingredient);\n          _this5.orderFreq = _this5.wasmService.orderFreq;\n        }\n      })();\n    }\n    calculateReorderPoint() {\n      var _this6 = this;\n      return _asyncToGenerator(function* () {\n        if (_this6.wasmService.reorderPoint != 0) {} else {\n          yield _this6.wasmService.calculateIngredientReorderPoint(_this6.ingredient);\n          _this6.reorderPoint = _this6.wasmService.reorderPoint;\n        }\n      })();\n    }\n    calculateSafetyStock() {}\n    static #_ = this.ɵfac = function AdminHomePageComponent_Factory(t) {\n      return new (t || AdminHomePageComponent)(i0.ɵɵdirectiveInject(i1.WasmService), i0.ɵɵdirectiveInject(i2.AngularFireStorage));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AdminHomePageComponent,\n      selectors: [[\"admin-homepage\"]],\n      decls: 49,\n      vars: 7,\n      consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [1, \"hero\", \"is-fullheight\", 2, \"background\", \"#F3F1EE\"], [1, \"hero-head\"], [\"role\", \"navigation\", \"aria-label\", \"main navigation\", 1, \"navbar\", \"is-transparent\", \"px-6\"], [1, \"homepageTitle\", 2, \"font-size\", \"3.6rem\"], [1, \"hero-body\"], [1, \"container\"], [1, \"columns\", \"is-centered\", \"is-vcentered\"], [1, \"column\", \"is-6\", 2, \"padding\", \"0\"], [1, \"column\"], [\"for\", \"dishName\"], [\"type\", \"text\", \"placeholder\", \"Enter Dish Name\", 3, \"ngModel\", \"ngModelChange\"], [1, \"button-container\"], [1, \"button\", 3, \"click\"], [\"class\", \"output-box\", 4, \"ngIf\"], [1, \"bcg-matrix-graph\"], [\"for\", \"ingredient\"], [\"type\", \"text\", \"placeholder\", \"Enter Ingredient Name\", \"formControlName\", \"ingredient\", \"id\", \"ingredient\", 3, \"ngModel\", \"ngModelChange\"], [1, \"output-box\"]],\n      template: function AdminHomePageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n          i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"section\", 3)(5, \"div\", 4)(6, \"nav\", 5);\n          i0.ɵɵelement(7, \"app-navigation\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"h1\", 6);\n          i0.ɵɵtext(9, \"Admin Homepage\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(10, \"router-outlet\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"div\", 7)(12, \"div\", 8)(13, \"div\", 9)(14, \"div\", 10)(15, \"body\")(16, \"div\", 8)(17, \"div\", 11)(18, \"div\")(19, \"label\", 12);\n          i0.ɵɵtext(20, \"Enter Dish Name:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"input\", 13);\n          i0.ɵɵlistener(\"ngModelChange\", function AdminHomePageComponent_Template_input_ngModelChange_21_listener($event) {\n            return ctx.dishName = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\", 14)(23, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function AdminHomePageComponent_Template_button_click_23_listener() {\n            return ctx.calculateProfitMargin();\n          });\n          i0.ɵɵtext(24, \"Calculate Profitability\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(25, AdminHomePageComponent_div_25_Template, 2, 1, \"div\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"div\", 14)(27, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function AdminHomePageComponent_Template_button_click_27_listener() {\n            return ctx.calculateCOGS();\n          });\n          i0.ɵɵtext(28, \"Calculate COGS\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(29, AdminHomePageComponent_div_29_Template, 2, 1, \"div\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"div\", 17);\n          i0.ɵɵelement(31, \"app-bcg-matrix\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(32, \"div\", 11)(33, \"div\")(34, \"label\", 18);\n          i0.ɵɵtext(35, \"Ingredient:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"input\", 19);\n          i0.ɵɵlistener(\"ngModelChange\", function AdminHomePageComponent_Template_input_ngModelChange_36_listener($event) {\n            return ctx.ingredient = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(37, \"div\", 14)(38, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function AdminHomePageComponent_Template_button_click_38_listener() {\n            return ctx.calculateOptimalOrderQuantity();\n          });\n          i0.ɵɵtext(39, \"Calculate Optimal Order Quantity\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(40, AdminHomePageComponent_div_40_Template, 2, 1, \"div\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(41, \"div\", 14)(42, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function AdminHomePageComponent_Template_button_click_42_listener() {\n            return ctx.calculateSafetyStock();\n          });\n          i0.ɵɵtext(43, \"Calculate Safety Stock\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(44, AdminHomePageComponent_div_44_Template, 2, 1, \"div\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(45, \"div\", 14)(46, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function AdminHomePageComponent_Template_button_click_46_listener() {\n            return ctx.calculateReorderPoint();\n          });\n          i0.ɵɵtext(47, \"Calculate Reorder Point\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(48, AdminHomePageComponent_div_48_Template, 2, 1, \"div\", 16);\n          i0.ɵɵelementEnd()()()()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(21);\n          i0.ɵɵproperty(\"ngModel\", ctx.dishName);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.profitability !== null);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.cogsResult !== null);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngModel\", ctx.ingredient);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.optimalorderQuantity !== null);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.safetyStock !== null);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.reorderPoint !== null);\n        }\n      },\n      dependencies: [i3.NgIf, i4.RouterOutlet, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i5.FormControlName, i6.NavigationComponent, i7.BcgMatrixComponent],\n      styles: [_c0, _c0]\n    });\n  }\n  return AdminHomePageComponent;\n})();\nexport { AdminHomePageComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}