[debug] [2023-10-23T04:58:44.391Z] ----------------------------------------------------------------------
[debug] [2023-10-23T04:58:44.392Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy --only functions
[debug] [2023-10-23T04:58:44.392Z] CLI Version:   12.7.0
[debug] [2023-10-23T04:58:44.393Z] Platform:      darwin
[debug] [2023-10-23T04:58:44.393Z] Node Version:  v18.15.0
[debug] [2023-10-23T04:58:44.398Z] Time:          Mon Oct 23 2023 10:28:44 GMT+0530 (India Standard Time)
[debug] [2023-10-23T04:58:44.398Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-23T04:58:44.452Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T04:58:44.452Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T04:58:44.453Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T04:58:44.453Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T04:58:44.453Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T04:58:44.453Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T04:58:44.453Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T04:58:44.453Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T04:58:44.453Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T04:58:44.453Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-23T04:58:44.453Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T04:58:44.454Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T04:58:44.454Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T04:58:44.454Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T04:58:44.454Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T04:58:44.454Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T04:58:44.454Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-23T04:58:44.454Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T04:58:44.458Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-23T04:58:44.459Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-23T04:58:44.459Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-10-23T04:58:44.461Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-23T04:58:44.461Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T04:58:44.461Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-10-23T04:58:45.866Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-23T04:58:45.866Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-10-23T04:58:45.867Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-23T04:58:45.867Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T04:58:46.924Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-23T04:58:46.924Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions 
[debug] [2023-10-23T04:58:46.928Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T04:58:48.169Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T04:58:48.170Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-23T04:58:48.172Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-23T04:58:48.172Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T04:58:48.175Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-23T04:58:48.175Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T04:58:48.176Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-23T04:58:48.176Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T04:58:48.178Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-23T04:58:48.178Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T04:58:49.385Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-23T04:58:49.386Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-23T04:58:49.632Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-23T04:58:49.633Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-23T04:58:49.634Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-23T04:58:49.635Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-23T04:58:49.654Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-23T04:58:49.654Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-23T04:58:49.654Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-23T04:58:51.012Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-23T04:58:51.013Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-23T04:58:51.014Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-23T04:58:52.191Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-23T04:58:52.191Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-23T04:58:52.194Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-23T04:58:54.056Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-23T04:58:54.056Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-23T04:58:54.183Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-23T04:58:56.494Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T04:58:56.494Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-23T04:58:56.497Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-23T04:58:57.963Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T04:58:57.963Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-23T04:58:57.970Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T04:58:59.065Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T04:58:59.066Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-23T04:58:59.068Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-23T04:58:59.068Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-23T04:59:00.593Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-23T04:59:00.593Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/4766577a-a332-4460-a59a-c256c5fd3967.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698038940&Signature=TfLJZn%2BC9hBP4cdzOQu7bopBGf%2B9g7nnFaBN0bHvuLRTSs%2BXDpPlWK2ERqkLe9PNxDgAQ3kF30sFdRn2kFl13ZcXDRwTydjGl84JGvpHbTZVLrtdW6sxWNUlon6ZVSCPFHQmenO5xP0O%2BlxRrz5X5LmLdO8MlrhOBfgt6PB4O%2Bm4AWio0FxfPGYawNuXPlCxKQ7IY0fsliO2IennplyaWJrQvCiD%2B%2BwzdTwwbXzx0X0t3Yj%2FeuEbvi5egoqNMQB%2FZwxJUsw6OM%2BgvArm5PuZBzf6MWXMVmAT5AUpHQ27iN78Y%2FLaIWeL6unha57p4968NYLXhK0RgEP9UqmEBoFf5A%3D%3D"}
[debug] [2023-10-23T04:59:00.595Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/4766577a-a332-4460-a59a-c256c5fd3967.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698038940&Signature=TfLJZn%2BC9hBP4cdzOQu7bopBGf%2B9g7nnFaBN0bHvuLRTSs%2BXDpPlWK2ERqkLe9PNxDgAQ3kF30sFdRn2kFl13ZcXDRwTydjGl84JGvpHbTZVLrtdW6sxWNUlon6ZVSCPFHQmenO5xP0O%2BlxRrz5X5LmLdO8MlrhOBfgt6PB4O%2Bm4AWio0FxfPGYawNuXPlCxKQ7IY0fsliO2IennplyaWJrQvCiD%2B%2BwzdTwwbXzx0X0t3Yj%2FeuEbvi5egoqNMQB%2FZwxJUsw6OM%2BgvArm5PuZBzf6MWXMVmAT5AUpHQ27iN78Y%2FLaIWeL6unha57p4968NYLXhK0RgEP9UqmEBoFf5A%3D%3D
[debug] [2023-10-23T04:59:00.595Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/4766577a-a332-4460-a59a-c256c5fd3967.zip [stream]
[debug] [2023-10-23T04:59:02.337Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/4766577a-a332-4460-a59a-c256c5fd3967.zip 200
[debug] [2023-10-23T04:59:02.337Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/4766577a-a332-4460-a59a-c256c5fd3967.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-23T04:59:02.345Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-23T04:59:02.345Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/4766577a-a332-4460-a59a-c256c5fd3967.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698038940&Signature=TfLJZn%2BC9hBP4cdzOQu7bopBGf%2B9g7nnFaBN0bHvuLRTSs%2BXDpPlWK2ERqkLe9PNxDgAQ3kF30sFdRn2kFl13ZcXDRwTydjGl84JGvpHbTZVLrtdW6sxWNUlon6ZVSCPFHQmenO5xP0O%2BlxRrz5X5LmLdO8MlrhOBfgt6PB4O%2Bm4AWio0FxfPGYawNuXPlCxKQ7IY0fsliO2IennplyaWJrQvCiD%2B%2BwzdTwwbXzx0X0t3Yj%2FeuEbvi5egoqNMQB%2FZwxJUsw6OM%2BgvArm5PuZBzf6MWXMVmAT5AUpHQ27iN78Y%2FLaIWeL6unha57p4968NYLXhK0RgEP9UqmEBoFf5A%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-23T04:59:03.711Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-23T04:59:03.711Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-23T04:59:03.721Z] Total Function Deployment time: 1373
[debug] [2023-10-23T04:59:03.721Z] 1 Functions Deployed
[debug] [2023-10-23T04:59:03.721Z] 1 Functions Errored
[debug] [2023-10-23T04:59:03.721Z] 0 Function Deployments Aborted
[debug] [2023-10-23T04:59:03.721Z] Average Function Deployment time: 1372
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-23T04:59:04.767Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-23T04:59:04.769Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-23T04:59:04.771Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T04:59:06.067Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-23T04:59:06.067Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/virtual-menu-59b9e"}}]}}
[debug] [2023-10-23T04:59:06.089Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T04:59:06.089Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T04:59:06.089Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T04:59:06.093Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T04:59:07.425Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T04:59:07.426Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T04:59:07.426Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T04:59:07.529Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T04:59:08.791Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T04:59:08.791Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T04:59:08.792Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-23T04:59:08.793Z] Functions deploy failed.
[debug] [2023-10-23T04:59:08.793Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-23T04:59:09.940Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2023-10-23T06:15:36.066Z] ----------------------------------------------------------------------
[debug] [2023-10-23T06:15:36.067Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy
[debug] [2023-10-23T06:15:36.068Z] CLI Version:   12.7.0
[debug] [2023-10-23T06:15:36.068Z] Platform:      darwin
[debug] [2023-10-23T06:15:36.068Z] Node Version:  v18.15.0
[debug] [2023-10-23T06:15:36.073Z] Time:          Mon Oct 23 2023 11:45:36 GMT+0530 (India Standard Time)
[debug] [2023-10-23T06:15:36.073Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-23T06:15:36.122Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:15:36.122Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:15:36.122Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:15:36.122Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:15:36.122Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:15:36.122Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:15:36.123Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:15:36.123Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:15:36.123Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:15:36.123Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-23T06:15:36.123Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:15:36.123Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:15:36.123Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:15:36.123Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:15:36.123Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:15:36.123Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T06:15:36.123Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-23T06:15:36.123Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T06:15:36.127Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-23T06:15:36.127Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-23T06:15:36.127Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-10-23T06:15:36.128Z] > refreshing access token with scopes: []
[debug] [2023-10-23T06:15:36.129Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2023-10-23T06:15:36.129Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-10-23T06:15:37.469Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2023-10-23T06:15:37.470Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-10-23T06:15:37.486Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-23T06:15:37.486Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:15:37.486Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T06:15:38.790Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-23T06:15:38.791Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T06:15:38.792Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-23T06:15:38.792Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T06:15:40.093Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-23T06:15:40.093Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T06:15:40.097Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T06:15:41.461Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T06:15:41.462Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2023-10-23T06:15:41.471Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T06:15:42.490Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T06:15:42.490Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-23T06:15:42.495Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-23T06:15:42.495Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:15:42.499Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-23T06:15:42.499Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:15:42.501Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-23T06:15:42.502Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:15:42.504Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-23T06:15:42.504Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:15:44.018Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-23T06:15:44.019Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-23T06:15:44.247Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-23T06:15:44.247Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-23T06:15:44.254Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-23T06:15:44.254Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-23T06:15:44.291Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-23T06:15:44.291Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-23T06:15:44.292Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-23T06:15:45.455Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-23T06:15:45.456Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-23T06:15:45.457Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-23T06:15:46.875Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-23T06:15:46.875Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-23T06:15:46.878Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-23T06:15:49.279Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-23T06:15:49.279Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-23T06:15:49.397Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-23T06:15:51.018Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T06:15:51.019Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-23T06:15:51.022Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-23T06:15:52.531Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T06:15:52.532Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-23T06:15:52.539Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T06:15:53.646Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T06:15:53.647Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-23T06:15:53.655Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions [none]
[debug] [2023-10-23T06:15:53.655Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T06:15:56.031Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions 200
[debug] [2023-10-23T06:15:56.032Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"name":"projects/224436038053/sites/virtual-menu-59b9e/versions/1f76881125fc3cbc","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T06:15:56.034Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-23T06:15:56.034Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-23T06:15:57.421Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-23T06:15:57.421Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/07da8c6d-eb8d-4f56-9c26-059c8aae1ead.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698043558&Signature=KvdYZYHruTCf8YzgXi7R7MB2qLdd299AQYhD1fqNbRBFDm7zHIWOOqPIqYHrH1mrhxTjP4So%2FLJjk%2FjS%2BWK7fwQe1hqOMMGZEwHNLc6FyBM%2FGTrKqzqReqK%2FJdmdbLUeawgE%2BRRdmVv%2FdmXfxMMogswkno0JBZEy7khdAC6bFiuC2rCHdqactQwzrh9mxWdBr1FcUptikW7WfUssKuwF59mXN92NfLh3PzcJZbrwvynKRgGlpjN3VWzGEjHLBFcgrxeN6JfDaMR1bvVUE0gOZdv%2Fmg9RdragKdn1uwQsKnz5E1XaXcZruMin6BQIhood8%2Fe4hjcmigTSxDospcp5eg%3D%3D"}
[debug] [2023-10-23T06:15:57.423Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/07da8c6d-eb8d-4f56-9c26-059c8aae1ead.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698043558&Signature=KvdYZYHruTCf8YzgXi7R7MB2qLdd299AQYhD1fqNbRBFDm7zHIWOOqPIqYHrH1mrhxTjP4So%2FLJjk%2FjS%2BWK7fwQe1hqOMMGZEwHNLc6FyBM%2FGTrKqzqReqK%2FJdmdbLUeawgE%2BRRdmVv%2FdmXfxMMogswkno0JBZEy7khdAC6bFiuC2rCHdqactQwzrh9mxWdBr1FcUptikW7WfUssKuwF59mXN92NfLh3PzcJZbrwvynKRgGlpjN3VWzGEjHLBFcgrxeN6JfDaMR1bvVUE0gOZdv%2Fmg9RdragKdn1uwQsKnz5E1XaXcZruMin6BQIhood8%2Fe4hjcmigTSxDospcp5eg%3D%3D
[debug] [2023-10-23T06:15:57.424Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/07da8c6d-eb8d-4f56-9c26-059c8aae1ead.zip [stream]
[debug] [2023-10-23T06:15:59.244Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/07da8c6d-eb8d-4f56-9c26-059c8aae1ead.zip 200
[debug] [2023-10-23T06:15:59.245Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/07da8c6d-eb8d-4f56-9c26-059c8aae1ead.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  hosting[virtual-menu-59b9e]: beginning deploy... 
[info] i  hosting[virtual-menu-59b9e]: found 3 files in public 
[debug] [2023-10-23T06:15:59.256Z] [hosting] uploading with 200 concurrency
[debug] [2023-10-23T06:15:59.267Z] [hosting] hash cache [cHVibGlj] stored for 3 files
[debug] [2023-10-23T06:15:59.267Z] [hosting][hash queue][FINAL] {"max":1,"min":0,"avg":0,"active":0,"complete":3,"success":3,"errored":0,"retried":0,"total":3,"elapsed":5}
[debug] [2023-10-23T06:15:59.267Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/1f76881125fc3cbc:populateFiles [none]
[debug] [2023-10-23T06:15:59.268Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/1f76881125fc3cbc:populateFiles {"files":{"/404.html":"05cbc6f94d7a69ce2e29646eab13be2c884e61ba93e3094df5028866876d18b3","/apple-app-site-association.json":"ed96e7f11a450905e5392238ead7509ba612fe0aac905baecc75cc5e0577fc05","/index.html":"d214aae81e8d3e872b168d47bd7055ff176e1e50117eacb830d5498a31e05311"}}
[debug] [2023-10-23T06:16:00.886Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/1f76881125fc3cbc:populateFiles 200
[debug] [2023-10-23T06:16:00.886Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/1f76881125fc3cbc:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/virtual-menu-59b9e/versions/1f76881125fc3cbc/files"}
[debug] [2023-10-23T06:16:00.886Z] [hosting][populate queue][FINAL] {"max":1623,"min":1623,"avg":1623,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":1623}
[debug] [2023-10-23T06:16:00.887Z] [hosting] uploads queued: 0
[debug] [2023-10-23T06:16:00.887Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1698041760887}
[info] ✔  hosting[virtual-menu-59b9e]: file upload complete 
[debug] [2023-10-23T06:16:00.888Z] [hosting] deploy completed after 1639ms
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-23T06:16:00.895Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-23T06:16:00.895Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/07da8c6d-eb8d-4f56-9c26-059c8aae1ead.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698043558&Signature=KvdYZYHruTCf8YzgXi7R7MB2qLdd299AQYhD1fqNbRBFDm7zHIWOOqPIqYHrH1mrhxTjP4So%2FLJjk%2FjS%2BWK7fwQe1hqOMMGZEwHNLc6FyBM%2FGTrKqzqReqK%2FJdmdbLUeawgE%2BRRdmVv%2FdmXfxMMogswkno0JBZEy7khdAC6bFiuC2rCHdqactQwzrh9mxWdBr1FcUptikW7WfUssKuwF59mXN92NfLh3PzcJZbrwvynKRgGlpjN3VWzGEjHLBFcgrxeN6JfDaMR1bvVUE0gOZdv%2Fmg9RdragKdn1uwQsKnz5E1XaXcZruMin6BQIhood8%2Fe4hjcmigTSxDospcp5eg%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-23T06:16:02.083Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-23T06:16:02.084Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-23T06:16:02.101Z] Total Function Deployment time: 1197
[debug] [2023-10-23T06:16:02.101Z] 1 Functions Deployed
[debug] [2023-10-23T06:16:02.101Z] 1 Functions Errored
[debug] [2023-10-23T06:16:02.101Z] 0 Function Deployments Aborted
[debug] [2023-10-23T06:16:02.101Z] Average Function Deployment time: 1196
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-23T06:16:03.039Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-23T06:16:03.043Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-23T06:16:03.045Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T06:16:04.537Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-23T06:16:04.538Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/virtual-menu-59b9e"}}]}}
[debug] [2023-10-23T06:16:04.647Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T06:16:04.647Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T06:16:04.648Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T06:16:04.649Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T06:16:05.908Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T06:16:05.908Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T06:16:05.909Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T06:16:06.011Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T06:16:07.330Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T06:16:07.331Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T06:16:07.331Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-23T06:16:07.332Z] Functions deploy failed.
[debug] [2023-10-23T06:16:07.332Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-23T06:16:08.275Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2023-10-23T06:42:02.105Z] ----------------------------------------------------------------------
[debug] [2023-10-23T06:42:02.107Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy
[debug] [2023-10-23T06:42:02.107Z] CLI Version:   12.7.0
[debug] [2023-10-23T06:42:02.107Z] Platform:      darwin
[debug] [2023-10-23T06:42:02.108Z] Node Version:  v18.15.0
[debug] [2023-10-23T06:42:02.109Z] Time:          Mon Oct 23 2023 12:12:02 GMT+0530 (India Standard Time)
[debug] [2023-10-23T06:42:02.109Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-23T06:42:02.156Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:42:02.157Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:42:02.157Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:42:02.157Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:42:02.157Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:42:02.157Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:42:02.157Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:42:02.157Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:42:02.157Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:42:02.157Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-23T06:42:02.158Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:42:02.158Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:42:02.158Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:42:02.158Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:42:02.158Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:42:02.158Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T06:42:02.158Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-23T06:42:02.158Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T06:42:02.161Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-23T06:42:02.161Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-23T06:42:02.161Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-10-23T06:42:02.163Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-23T06:42:02.163Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:42:02.163Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T06:42:03.916Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-23T06:42:03.917Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T06:42:03.918Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-23T06:42:03.918Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T06:42:05.450Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-23T06:42:05.451Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T06:42:05.452Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T06:42:06.979Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T06:42:06.980Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2023-10-23T06:42:06.985Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T06:42:09.728Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T06:42:09.729Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-23T06:42:09.733Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-23T06:42:09.733Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:42:09.735Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-23T06:42:09.735Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:42:09.736Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-23T06:42:09.737Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:42:09.739Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-23T06:42:09.739Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:42:11.709Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-23T06:42:11.709Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-23T06:42:11.882Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-23T06:42:11.883Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-23T06:42:11.906Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-23T06:42:11.906Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-23T06:42:11.927Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-23T06:42:11.927Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-23T06:42:11.928Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-23T06:42:13.299Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-23T06:42:13.300Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-23T06:42:13.301Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-23T06:42:15.046Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-23T06:42:15.046Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-23T06:42:15.048Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-23T06:42:17.637Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-23T06:42:17.637Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-23T06:42:17.759Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-23T06:42:19.500Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T06:42:19.501Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-23T06:42:19.502Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-23T06:42:21.113Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T06:42:21.113Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-23T06:42:21.119Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T06:42:22.302Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T06:42:22.303Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-23T06:42:22.311Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions [none]
[debug] [2023-10-23T06:42:22.311Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T06:42:25.102Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions 200
[debug] [2023-10-23T06:42:25.103Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"name":"projects/224436038053/sites/virtual-menu-59b9e/versions/4561477ccb70354c","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T06:42:25.105Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-23T06:42:25.105Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-23T06:42:26.905Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-23T06:42:26.905Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/cd4cfffd-b81f-4386-8c31-24b07bd922a8.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698045147&Signature=coMIBRB8oHJjA6iaSEaK%2Fagf21G0fSFDvpmgp9jBxrqFP6MYeKeYwvnNzlmQaClGbUwDhYYOMhbEZjXf1PhY5wCsZTbj8snPRRwmAIke8WHoz2JwqreVs8CK8PRGJpjgvZygFXbrJxkyIOtjPA5c7XM1LPXnQJJ9gxfINikq9ofg6c1ejzqqopH46f7d%2BEGnxnZSAYoRG8z9rWQPgzVKWozSthXWEc7r13KDE6zvkizMd9fKDEMxOmZhItguunGQ5DmtS6FhJCtVGQma03Ut%2BmymBrUTOFooxxxgR41QFaFfZZEnOSVSdtnzMSYsm%2FCmLv%2FtFi%2F3fouh0mbYq%2F4Z4Q%3D%3D"}
[debug] [2023-10-23T06:42:26.907Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/cd4cfffd-b81f-4386-8c31-24b07bd922a8.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698045147&Signature=coMIBRB8oHJjA6iaSEaK%2Fagf21G0fSFDvpmgp9jBxrqFP6MYeKeYwvnNzlmQaClGbUwDhYYOMhbEZjXf1PhY5wCsZTbj8snPRRwmAIke8WHoz2JwqreVs8CK8PRGJpjgvZygFXbrJxkyIOtjPA5c7XM1LPXnQJJ9gxfINikq9ofg6c1ejzqqopH46f7d%2BEGnxnZSAYoRG8z9rWQPgzVKWozSthXWEc7r13KDE6zvkizMd9fKDEMxOmZhItguunGQ5DmtS6FhJCtVGQma03Ut%2BmymBrUTOFooxxxgR41QFaFfZZEnOSVSdtnzMSYsm%2FCmLv%2FtFi%2F3fouh0mbYq%2F4Z4Q%3D%3D
[debug] [2023-10-23T06:42:26.907Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/cd4cfffd-b81f-4386-8c31-24b07bd922a8.zip [stream]
[debug] [2023-10-23T06:42:28.826Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/cd4cfffd-b81f-4386-8c31-24b07bd922a8.zip 200
[debug] [2023-10-23T06:42:28.826Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/cd4cfffd-b81f-4386-8c31-24b07bd922a8.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  hosting[virtual-menu-59b9e]: beginning deploy... 
[info] i  hosting[virtual-menu-59b9e]: found 3 files in public 
[debug] [2023-10-23T06:42:28.832Z] [hosting] uploading with 200 concurrency
[debug] [2023-10-23T06:42:28.839Z] [hosting] hash cache [cHVibGlj] stored for 3 files
[debug] [2023-10-23T06:42:28.839Z] [hosting][hash queue][FINAL] {"max":1,"min":0,"avg":0,"active":0,"complete":3,"success":3,"errored":0,"retried":0,"total":3,"elapsed":3}
[debug] [2023-10-23T06:42:28.839Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/4561477ccb70354c:populateFiles [none]
[debug] [2023-10-23T06:42:28.840Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/4561477ccb70354c:populateFiles {"files":{"/404.html":"05cbc6f94d7a69ce2e29646eab13be2c884e61ba93e3094df5028866876d18b3","/apple-app-site-association.json":"ed96e7f11a450905e5392238ead7509ba612fe0aac905baecc75cc5e0577fc05","/index.html":"d214aae81e8d3e872b168d47bd7055ff176e1e50117eacb830d5498a31e05311"}}
[debug] [2023-10-23T06:42:30.517Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/4561477ccb70354c:populateFiles 200
[debug] [2023-10-23T06:42:30.517Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/4561477ccb70354c:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/virtual-menu-59b9e/versions/4561477ccb70354c/files"}
[debug] [2023-10-23T06:42:30.519Z] [hosting][populate queue][FINAL] {"max":1682,"min":1682,"avg":1682,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":1682}
[debug] [2023-10-23T06:42:30.519Z] [hosting] uploads queued: 0
[debug] [2023-10-23T06:42:30.519Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1698043350519}
[info] ✔  hosting[virtual-menu-59b9e]: file upload complete 
[debug] [2023-10-23T06:42:30.521Z] [hosting] deploy completed after 1693ms
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-23T06:42:30.525Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-23T06:42:30.525Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/cd4cfffd-b81f-4386-8c31-24b07bd922a8.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698045147&Signature=coMIBRB8oHJjA6iaSEaK%2Fagf21G0fSFDvpmgp9jBxrqFP6MYeKeYwvnNzlmQaClGbUwDhYYOMhbEZjXf1PhY5wCsZTbj8snPRRwmAIke8WHoz2JwqreVs8CK8PRGJpjgvZygFXbrJxkyIOtjPA5c7XM1LPXnQJJ9gxfINikq9ofg6c1ejzqqopH46f7d%2BEGnxnZSAYoRG8z9rWQPgzVKWozSthXWEc7r13KDE6zvkizMd9fKDEMxOmZhItguunGQ5DmtS6FhJCtVGQma03Ut%2BmymBrUTOFooxxxgR41QFaFfZZEnOSVSdtnzMSYsm%2FCmLv%2FtFi%2F3fouh0mbYq%2F4Z4Q%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-23T06:42:31.905Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-23T06:42:31.905Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-23T06:42:31.916Z] Total Function Deployment time: 1384
[debug] [2023-10-23T06:42:31.916Z] 1 Functions Deployed
[debug] [2023-10-23T06:42:31.916Z] 1 Functions Errored
[debug] [2023-10-23T06:42:31.916Z] 0 Function Deployments Aborted
[debug] [2023-10-23T06:42:31.916Z] Average Function Deployment time: 1383
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-23T06:42:33.048Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-23T06:42:33.050Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-23T06:42:33.051Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T06:42:34.830Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-23T06:42:34.830Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/virtual-menu-59b9e"}}]}}
[debug] [2023-10-23T06:42:34.900Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T06:42:34.900Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T06:42:34.900Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T06:42:34.902Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T06:42:36.249Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T06:42:36.249Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T06:42:36.250Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T06:42:36.351Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T06:42:37.683Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T06:42:37.683Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T06:42:37.683Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-23T06:42:37.683Z] Functions deploy failed.
[debug] [2023-10-23T06:42:37.683Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-23T06:42:38.912Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2023-10-23T06:52:52.170Z] ----------------------------------------------------------------------
[debug] [2023-10-23T06:52:52.171Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy --debug
[debug] [2023-10-23T06:52:52.172Z] CLI Version:   12.7.0
[debug] [2023-10-23T06:52:52.172Z] Platform:      darwin
[debug] [2023-10-23T06:52:52.172Z] Node Version:  v18.15.0
[debug] [2023-10-23T06:52:52.177Z] Time:          Mon Oct 23 2023 12:22:52 GMT+0530 (India Standard Time)
[debug] [2023-10-23T06:52:52.177Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-23T06:52:52.225Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:52:52.226Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:52:52.226Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:52:52.226Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:52:52.227Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:52:52.227Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:52:52.227Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:52:52.227Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:52:52.227Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T06:52:52.227Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-23T06:52:52.227Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:52:52.227Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:52:52.228Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:52:52.228Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:52:52.228Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T06:52:52.228Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T06:52:52.228Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-23T06:52:52.228Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T06:52:52.231Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-23T06:52:52.232Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-23T06:52:52.232Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-10-23T06:52:52.235Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-23T06:52:52.235Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:52:52.236Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T06:52:53.800Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-23T06:52:53.800Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T06:52:53.800Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-23T06:52:53.800Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T06:52:55.556Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-23T06:52:55.556Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T06:52:55.558Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T06:52:57.385Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T06:52:57.386Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2023-10-23T06:52:57.391Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T06:52:58.731Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T06:52:58.732Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-23T06:52:58.734Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-23T06:52:58.734Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:52:58.736Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-23T06:52:58.736Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:52:58.737Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-23T06:52:58.737Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:52:58.738Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-23T06:52:58.739Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T06:53:00.564Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-23T06:53:00.565Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-23T06:53:00.763Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-23T06:53:00.763Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-23T06:53:00.764Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-23T06:53:00.764Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-23T06:53:00.803Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-23T06:53:00.804Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-23T06:53:00.805Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-23T06:53:02.252Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-23T06:53:02.253Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-23T06:53:02.255Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-23T06:53:03.925Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-23T06:53:03.925Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-23T06:53:03.929Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-23T06:53:06.456Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-23T06:53:06.456Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-23T06:53:06.581Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-23T06:53:08.527Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T06:53:08.527Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-23T06:53:08.530Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-23T06:53:10.031Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T06:53:10.031Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-23T06:53:10.038Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T06:53:11.271Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T06:53:11.271Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-23T06:53:11.281Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions [none]
[debug] [2023-10-23T06:53:11.281Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T06:53:14.681Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions 200
[debug] [2023-10-23T06:53:14.681Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"name":"projects/224436038053/sites/virtual-menu-59b9e/versions/faee29629b2bf168","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T06:53:14.684Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-23T06:53:14.684Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-23T06:53:16.231Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-23T06:53:16.231Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/42b21caa-d04a-4c5d-bfd8-d77c6d747dca.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698045796&Signature=RGeEdgeK2J9TN%2BNYloscjF6i8wahW4JmKTyZPTTC1LVZ3y%2BP6Rva7EhC4QcLapkThY3SUo%2FN4bnk4Jdka7X2X%2FcV%2BbtDqzVH3R3LsnaaCMzSKmaffSgYj4DU07d3m7ignwreS9gvIDBMNWI2B5jIdO8AEgtPMF%2BIxISu2IN8GGmfpKiAGMqvHHbKJ6mMBoUPDEoZOeEuk7KVao8TAKvX9sUYfDUf7pXUWYCzFq285F1V34BTSbYWaHX4U4TlqKr3C1MQ1lj2iJmGaEBZQB1H75GHnkVNoWIEyycLwZbFM%2BuvsgyMNUge5f0TvITsBkUoi0yAKkfLcTC1ze5MGpzrJA%3D%3D"}
[debug] [2023-10-23T06:53:16.233Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/42b21caa-d04a-4c5d-bfd8-d77c6d747dca.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698045796&Signature=RGeEdgeK2J9TN%2BNYloscjF6i8wahW4JmKTyZPTTC1LVZ3y%2BP6Rva7EhC4QcLapkThY3SUo%2FN4bnk4Jdka7X2X%2FcV%2BbtDqzVH3R3LsnaaCMzSKmaffSgYj4DU07d3m7ignwreS9gvIDBMNWI2B5jIdO8AEgtPMF%2BIxISu2IN8GGmfpKiAGMqvHHbKJ6mMBoUPDEoZOeEuk7KVao8TAKvX9sUYfDUf7pXUWYCzFq285F1V34BTSbYWaHX4U4TlqKr3C1MQ1lj2iJmGaEBZQB1H75GHnkVNoWIEyycLwZbFM%2BuvsgyMNUge5f0TvITsBkUoi0yAKkfLcTC1ze5MGpzrJA%3D%3D
[debug] [2023-10-23T06:53:16.233Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/42b21caa-d04a-4c5d-bfd8-d77c6d747dca.zip [stream]
[debug] [2023-10-23T06:53:18.378Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/42b21caa-d04a-4c5d-bfd8-d77c6d747dca.zip 200
[debug] [2023-10-23T06:53:18.378Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/42b21caa-d04a-4c5d-bfd8-d77c6d747dca.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  hosting[virtual-menu-59b9e]: beginning deploy... 
[info] i  hosting[virtual-menu-59b9e]: found 3 files in public 
[debug] [2023-10-23T06:53:18.387Z] [hosting] uploading with 200 concurrency
[debug] [2023-10-23T06:53:18.392Z] [hosting] hash cache [cHVibGlj] stored for 3 files
[debug] [2023-10-23T06:53:18.393Z] [hosting][hash queue][FINAL] {"max":1,"min":0,"avg":0,"active":0,"complete":3,"success":3,"errored":0,"retried":0,"total":3,"elapsed":4}
[debug] [2023-10-23T06:53:18.393Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/faee29629b2bf168:populateFiles [none]
[debug] [2023-10-23T06:53:18.394Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/faee29629b2bf168:populateFiles {"files":{"/404.html":"05cbc6f94d7a69ce2e29646eab13be2c884e61ba93e3094df5028866876d18b3","/apple-app-site-association.json":"ed96e7f11a450905e5392238ead7509ba612fe0aac905baecc75cc5e0577fc05","/index.html":"d214aae81e8d3e872b168d47bd7055ff176e1e50117eacb830d5498a31e05311"}}
[debug] [2023-10-23T06:53:19.998Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/faee29629b2bf168:populateFiles 200
[debug] [2023-10-23T06:53:19.998Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/faee29629b2bf168:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/virtual-menu-59b9e/versions/faee29629b2bf168/files"}
[debug] [2023-10-23T06:53:19.999Z] [hosting][populate queue][FINAL] {"max":1608,"min":1608,"avg":1608,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":1609}
[debug] [2023-10-23T06:53:19.999Z] [hosting] uploads queued: 0
[debug] [2023-10-23T06:53:19.999Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1698043999999}
[info] i  hosting: upload complete 
[info] ✔  hosting[virtual-menu-59b9e]: file upload complete 
[debug] [2023-10-23T06:53:20.000Z] [hosting] deploy completed after 1619ms
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-23T06:53:20.007Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-23T06:53:20.007Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/42b21caa-d04a-4c5d-bfd8-d77c6d747dca.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698045796&Signature=RGeEdgeK2J9TN%2BNYloscjF6i8wahW4JmKTyZPTTC1LVZ3y%2BP6Rva7EhC4QcLapkThY3SUo%2FN4bnk4Jdka7X2X%2FcV%2BbtDqzVH3R3LsnaaCMzSKmaffSgYj4DU07d3m7ignwreS9gvIDBMNWI2B5jIdO8AEgtPMF%2BIxISu2IN8GGmfpKiAGMqvHHbKJ6mMBoUPDEoZOeEuk7KVao8TAKvX9sUYfDUf7pXUWYCzFq285F1V34BTSbYWaHX4U4TlqKr3C1MQ1lj2iJmGaEBZQB1H75GHnkVNoWIEyycLwZbFM%2BuvsgyMNUge5f0TvITsBkUoi0yAKkfLcTC1ze5MGpzrJA%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-23T06:53:21.784Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-23T06:53:21.784Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-23T06:53:21.800Z] Total Function Deployment time: 1783
[debug] [2023-10-23T06:53:21.800Z] 1 Functions Deployed
[debug] [2023-10-23T06:53:21.800Z] 1 Functions Errored
[debug] [2023-10-23T06:53:21.800Z] 0 Function Deployments Aborted
[debug] [2023-10-23T06:53:21.800Z] Average Function Deployment time: 1782
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-23T06:53:22.936Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-23T06:53:22.938Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-23T06:53:22.940Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T06:53:25.071Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-23T06:53:25.071Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/virtual-menu-59b9e"}}]}}
[debug] [2023-10-23T06:53:25.124Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T06:53:25.124Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T06:53:25.125Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T06:53:25.128Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T06:53:26.579Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T06:53:26.579Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T06:53:26.580Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T06:53:26.682Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T06:53:28.031Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T06:53:28.032Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T06:53:28.032Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-23T06:53:28.032Z] Functions deploy failed.
[debug] [2023-10-23T06:53:28.032Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-23T06:53:29.143Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2023-10-23T08:27:22.880Z] ----------------------------------------------------------------------
[debug] [2023-10-23T08:27:22.882Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy --debug
[debug] [2023-10-23T08:27:22.882Z] CLI Version:   12.7.0
[debug] [2023-10-23T08:27:22.882Z] Platform:      darwin
[debug] [2023-10-23T08:27:22.882Z] Node Version:  v18.15.0
[debug] [2023-10-23T08:27:22.887Z] Time:          Mon Oct 23 2023 13:57:22 GMT+0530 (India Standard Time)
[debug] [2023-10-23T08:27:22.887Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-23T08:27:22.936Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:27:22.936Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:27:22.937Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:27:22.937Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:27:22.937Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:27:22.937Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:27:22.937Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:27:22.937Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:27:22.937Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:27:22.938Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-23T08:27:22.938Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:27:22.938Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:27:22.938Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:27:22.938Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:27:22.938Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:27:22.938Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T08:27:22.938Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-23T08:27:22.938Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T08:27:22.942Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-23T08:27:22.942Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-23T08:27:22.942Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-10-23T08:27:22.944Z] > refreshing access token with scopes: []
[debug] [2023-10-23T08:27:22.946Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2023-10-23T08:27:22.946Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-10-23T08:27:24.494Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2023-10-23T08:27:24.495Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-10-23T08:27:24.509Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-23T08:27:24.509Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:27:24.509Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T08:27:25.861Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-23T08:27:25.861Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T08:27:25.862Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-23T08:27:25.862Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T08:27:27.526Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-23T08:27:27.526Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T08:27:27.528Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:27:29.114Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:27:29.115Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2023-10-23T08:27:29.120Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:27:30.137Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:27:30.137Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-23T08:27:30.140Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-23T08:27:30.140Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:27:30.143Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-23T08:27:30.143Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:27:30.144Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-23T08:27:30.144Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:27:30.146Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-23T08:27:30.146Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:27:31.957Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-23T08:27:31.958Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-23T08:27:31.960Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-23T08:27:31.960Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-23T08:27:31.960Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-23T08:27:31.960Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-23T08:27:31.962Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-23T08:27:31.962Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-23T08:27:31.962Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-23T08:27:33.210Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-23T08:27:33.211Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-23T08:27:33.212Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-23T08:27:34.666Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-23T08:27:34.667Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-23T08:27:34.671Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-23T08:27:36.876Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-23T08:27:36.877Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-23T08:27:36.996Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-23T08:27:39.737Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T08:27:39.737Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-23T08:27:39.741Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-23T08:27:42.647Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T08:27:42.648Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-23T08:27:42.654Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:27:43.812Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:27:43.813Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-23T08:27:43.821Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions [none]
[debug] [2023-10-23T08:27:43.821Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T08:27:46.462Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions 200
[debug] [2023-10-23T08:27:46.463Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"name":"projects/224436038053/sites/virtual-menu-59b9e/versions/e29502ae7542953c","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T08:27:46.466Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-23T08:27:46.466Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-23T08:27:47.895Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-23T08:27:47.895Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/f39ce4a8-1518-442a-8b5b-1d389b2f9288.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698051468&Signature=D9pfjfFBviTQHrd5%2BVWmpw0zHkf3jTWdaeRfQIlzoTcD2NQuskECXBe7ZALd1Vjm6AKFcsdGRaF5enR%2BLLJ9P%2F5op%2Bf3mDV7da%2BUxkByCHxjRkmbNx%2FcSgxUXRRBXZAifHLcpUsvmyoyeabUKRT6E9i5R8I1%2Baou6UzFVGt4Ujhi41ea5itzjga9nxIS1V46F1Ei5V%2BUTxhOdy4X8ZvgAPdgXlJ0rl5YC6XoHms0V5htdKoj7YJ2wVVvIb6SJxk3UTmd8ofYNv%2FirwHWBdFrk7F4TCw9%2BrD%2Bryn9nvT68T6Wl%2BEWXmCSQUhRlTlb83XrVGBZTXKhZWioFcg8gkI0CQ%3D%3D"}
[debug] [2023-10-23T08:27:47.897Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/f39ce4a8-1518-442a-8b5b-1d389b2f9288.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698051468&Signature=D9pfjfFBviTQHrd5%2BVWmpw0zHkf3jTWdaeRfQIlzoTcD2NQuskECXBe7ZALd1Vjm6AKFcsdGRaF5enR%2BLLJ9P%2F5op%2Bf3mDV7da%2BUxkByCHxjRkmbNx%2FcSgxUXRRBXZAifHLcpUsvmyoyeabUKRT6E9i5R8I1%2Baou6UzFVGt4Ujhi41ea5itzjga9nxIS1V46F1Ei5V%2BUTxhOdy4X8ZvgAPdgXlJ0rl5YC6XoHms0V5htdKoj7YJ2wVVvIb6SJxk3UTmd8ofYNv%2FirwHWBdFrk7F4TCw9%2BrD%2Bryn9nvT68T6Wl%2BEWXmCSQUhRlTlb83XrVGBZTXKhZWioFcg8gkI0CQ%3D%3D
[debug] [2023-10-23T08:27:47.897Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/f39ce4a8-1518-442a-8b5b-1d389b2f9288.zip [stream]
[debug] [2023-10-23T08:27:49.891Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/f39ce4a8-1518-442a-8b5b-1d389b2f9288.zip 200
[debug] [2023-10-23T08:27:49.891Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/f39ce4a8-1518-442a-8b5b-1d389b2f9288.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  hosting[virtual-menu-59b9e]: beginning deploy... 
[info] i  hosting[virtual-menu-59b9e]: found 3 files in public 
[debug] [2023-10-23T08:27:49.900Z] [hosting] uploading with 200 concurrency
[debug] [2023-10-23T08:27:49.906Z] [hosting] hash cache [cHVibGlj] stored for 3 files
[debug] [2023-10-23T08:27:49.906Z] [hosting][hash queue][FINAL] {"max":0,"min":0,"avg":0,"active":0,"complete":3,"success":3,"errored":0,"retried":0,"total":3,"elapsed":4}
[debug] [2023-10-23T08:27:49.906Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/e29502ae7542953c:populateFiles [none]
[debug] [2023-10-23T08:27:49.907Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/e29502ae7542953c:populateFiles {"files":{"/404.html":"05cbc6f94d7a69ce2e29646eab13be2c884e61ba93e3094df5028866876d18b3","/apple-app-site-association.json":"ed96e7f11a450905e5392238ead7509ba612fe0aac905baecc75cc5e0577fc05","/index.html":"d214aae81e8d3e872b168d47bd7055ff176e1e50117eacb830d5498a31e05311"}}
[debug] [2023-10-23T08:27:51.490Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/e29502ae7542953c:populateFiles 200
[debug] [2023-10-23T08:27:51.490Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/e29502ae7542953c:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/virtual-menu-59b9e/versions/e29502ae7542953c/files"}
[debug] [2023-10-23T08:27:51.490Z] [hosting][populate queue][FINAL] {"max":1587,"min":1587,"avg":1587,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":1587}
[debug] [2023-10-23T08:27:51.490Z] [hosting] uploads queued: 0
[debug] [2023-10-23T08:27:51.490Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1698049671490}
[info] i  hosting: upload complete 
[info] ✔  hosting[virtual-menu-59b9e]: file upload complete 
[debug] [2023-10-23T08:27:51.491Z] [hosting] deploy completed after 1596ms
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-23T08:27:51.494Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-23T08:27:51.494Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/f39ce4a8-1518-442a-8b5b-1d389b2f9288.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698051468&Signature=D9pfjfFBviTQHrd5%2BVWmpw0zHkf3jTWdaeRfQIlzoTcD2NQuskECXBe7ZALd1Vjm6AKFcsdGRaF5enR%2BLLJ9P%2F5op%2Bf3mDV7da%2BUxkByCHxjRkmbNx%2FcSgxUXRRBXZAifHLcpUsvmyoyeabUKRT6E9i5R8I1%2Baou6UzFVGt4Ujhi41ea5itzjga9nxIS1V46F1Ei5V%2BUTxhOdy4X8ZvgAPdgXlJ0rl5YC6XoHms0V5htdKoj7YJ2wVVvIb6SJxk3UTmd8ofYNv%2FirwHWBdFrk7F4TCw9%2BrD%2Bryn9nvT68T6Wl%2BEWXmCSQUhRlTlb83XrVGBZTXKhZWioFcg8gkI0CQ%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-23T08:27:53.029Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-23T08:27:53.030Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-23T08:27:53.041Z] Total Function Deployment time: 1539
[debug] [2023-10-23T08:27:53.041Z] 1 Functions Deployed
[debug] [2023-10-23T08:27:53.041Z] 1 Functions Errored
[debug] [2023-10-23T08:27:53.041Z] 0 Function Deployments Aborted
[debug] [2023-10-23T08:27:53.041Z] Average Function Deployment time: 1538
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-23T08:27:54.262Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-23T08:27:54.265Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-23T08:27:54.267Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:27:56.104Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-23T08:27:56.105Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/virtual-menu-59b9e","service":"artifactregistry.googleapis.com"}}]}}
[debug] [2023-10-23T08:27:56.107Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:27:56.107Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:27:56.108Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T08:27:56.111Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:27:57.532Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:27:57.532Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:27:57.533Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T08:27:57.634Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:27:58.969Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:27:58.969Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:27:58.969Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-23T08:27:58.970Z] Functions deploy failed.
[debug] [2023-10-23T08:27:58.970Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-23T08:27:59.991Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2023-10-23T08:29:04.776Z] ----------------------------------------------------------------------
[debug] [2023-10-23T08:29:04.778Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy --debug
[debug] [2023-10-23T08:29:04.778Z] CLI Version:   12.7.0
[debug] [2023-10-23T08:29:04.778Z] Platform:      darwin
[debug] [2023-10-23T08:29:04.778Z] Node Version:  v18.15.0
[debug] [2023-10-23T08:29:04.784Z] Time:          Mon Oct 23 2023 13:59:04 GMT+0530 (India Standard Time)
[debug] [2023-10-23T08:29:04.784Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-23T08:29:04.841Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:29:04.842Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:29:04.842Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:29:04.842Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:29:04.842Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:29:04.842Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:29:04.842Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:29:04.843Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:29:04.843Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:29:04.843Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-23T08:29:04.843Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:29:04.844Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:29:04.844Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:29:04.844Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:29:04.844Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:29:04.844Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T08:29:04.844Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-23T08:29:04.844Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T08:29:04.852Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-23T08:29:04.852Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-23T08:29:04.852Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-10-23T08:29:04.864Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-23T08:29:04.865Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:29:04.865Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T08:29:06.174Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-23T08:29:06.174Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T08:29:06.176Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-23T08:29:06.176Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T08:29:07.191Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-23T08:29:07.192Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T08:29:07.194Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:29:08.279Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:29:08.279Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2023-10-23T08:29:08.283Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:29:09.466Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:29:09.466Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-23T08:29:09.469Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-23T08:29:09.469Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:29:09.470Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-23T08:29:09.471Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:29:09.472Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-23T08:29:09.473Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:29:09.475Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-23T08:29:09.476Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:29:10.659Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-23T08:29:10.660Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-23T08:29:10.664Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-23T08:29:10.664Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-23T08:29:10.699Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-23T08:29:10.699Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-23T08:29:10.897Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-23T08:29:10.897Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-23T08:29:10.898Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-23T08:29:12.124Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-23T08:29:12.124Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-23T08:29:12.126Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-23T08:29:13.526Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-23T08:29:13.527Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-23T08:29:13.531Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-23T08:29:15.421Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-23T08:29:15.422Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-23T08:29:15.544Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-23T08:29:17.000Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T08:29:17.000Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-23T08:29:17.002Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-23T08:29:18.341Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T08:29:18.341Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-23T08:29:18.344Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:29:19.493Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:29:19.493Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-23T08:29:19.498Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions [none]
[debug] [2023-10-23T08:29:19.498Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T08:29:21.710Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions 200
[debug] [2023-10-23T08:29:21.710Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"name":"projects/224436038053/sites/virtual-menu-59b9e/versions/ac2390152ee48ffa","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T08:29:21.713Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-23T08:29:21.713Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-23T08:29:23.126Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-23T08:29:23.127Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/22513799-969b-4bc8-8a44-1206346db116.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698051563&Signature=Avac7fNn3cSsT0xbT%2FIo4IrkKW8rT6pTj%2BwY4vuU0pXaY%2B4%2BEOwLzHQoh10xtHTYDaqyAYGpRrUZEdOqeaKiXnWQGBp%2FXBYCbrDmsuLYmODiH8aepvJ%2FHW7uOYMIIaNVomoD3TXZZ53ctUPDXPZNfYcjO2jd4kT1w8lPoag7kKuPJ98wKGp8MPKehaIUAdgm7URuGfwzPvLfcBHqZl7bLxDrUHWQWPYbtvt93sCFsf316r5N8jx%2BpDBHtheepPDv0%2BWdWrfWue8hk%2BxntNVvGTxFdB63vNL2ngJRnYE0QK7ljIa%2Bx79nNtRq5fjejWdHJNJMb7NoKSQ9EGdfu%2BVjPQ%3D%3D"}
[debug] [2023-10-23T08:29:23.128Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/22513799-969b-4bc8-8a44-1206346db116.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698051563&Signature=Avac7fNn3cSsT0xbT%2FIo4IrkKW8rT6pTj%2BwY4vuU0pXaY%2B4%2BEOwLzHQoh10xtHTYDaqyAYGpRrUZEdOqeaKiXnWQGBp%2FXBYCbrDmsuLYmODiH8aepvJ%2FHW7uOYMIIaNVomoD3TXZZ53ctUPDXPZNfYcjO2jd4kT1w8lPoag7kKuPJ98wKGp8MPKehaIUAdgm7URuGfwzPvLfcBHqZl7bLxDrUHWQWPYbtvt93sCFsf316r5N8jx%2BpDBHtheepPDv0%2BWdWrfWue8hk%2BxntNVvGTxFdB63vNL2ngJRnYE0QK7ljIa%2Bx79nNtRq5fjejWdHJNJMb7NoKSQ9EGdfu%2BVjPQ%3D%3D
[debug] [2023-10-23T08:29:23.128Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/22513799-969b-4bc8-8a44-1206346db116.zip [stream]
[debug] [2023-10-23T08:29:24.578Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/22513799-969b-4bc8-8a44-1206346db116.zip 200
[debug] [2023-10-23T08:29:24.578Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/22513799-969b-4bc8-8a44-1206346db116.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  hosting[virtual-menu-59b9e]: beginning deploy... 
[info] i  hosting[virtual-menu-59b9e]: found 3 files in public 
[debug] [2023-10-23T08:29:24.589Z] [hosting] uploading with 200 concurrency
[debug] [2023-10-23T08:29:24.597Z] [hosting] hash cache [cHVibGlj] stored for 3 files
[debug] [2023-10-23T08:29:24.597Z] [hosting][hash queue][FINAL] {"max":1,"min":0,"avg":0,"active":0,"complete":3,"success":3,"errored":0,"retried":0,"total":3,"elapsed":4}
[debug] [2023-10-23T08:29:24.598Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/ac2390152ee48ffa:populateFiles [none]
[debug] [2023-10-23T08:29:24.598Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/ac2390152ee48ffa:populateFiles {"files":{"/404.html":"05cbc6f94d7a69ce2e29646eab13be2c884e61ba93e3094df5028866876d18b3","/apple-app-site-association.json":"ed96e7f11a450905e5392238ead7509ba612fe0aac905baecc75cc5e0577fc05","/index.html":"d214aae81e8d3e872b168d47bd7055ff176e1e50117eacb830d5498a31e05311"}}
[debug] [2023-10-23T08:29:26.163Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/ac2390152ee48ffa:populateFiles 200
[debug] [2023-10-23T08:29:26.163Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/ac2390152ee48ffa:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/virtual-menu-59b9e/versions/ac2390152ee48ffa/files"}
[debug] [2023-10-23T08:29:26.164Z] [hosting][populate queue][FINAL] {"max":1570,"min":1570,"avg":1570,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":1570}
[debug] [2023-10-23T08:29:26.165Z] [hosting] uploads queued: 0
[debug] [2023-10-23T08:29:26.165Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1698049766165}
[info] i  hosting: upload complete 
[info] ✔  hosting[virtual-menu-59b9e]: file upload complete 
[debug] [2023-10-23T08:29:26.166Z] [hosting] deploy completed after 1584ms
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-23T08:29:26.173Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-23T08:29:26.174Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/22513799-969b-4bc8-8a44-1206346db116.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698051563&Signature=Avac7fNn3cSsT0xbT%2FIo4IrkKW8rT6pTj%2BwY4vuU0pXaY%2B4%2BEOwLzHQoh10xtHTYDaqyAYGpRrUZEdOqeaKiXnWQGBp%2FXBYCbrDmsuLYmODiH8aepvJ%2FHW7uOYMIIaNVomoD3TXZZ53ctUPDXPZNfYcjO2jd4kT1w8lPoag7kKuPJ98wKGp8MPKehaIUAdgm7URuGfwzPvLfcBHqZl7bLxDrUHWQWPYbtvt93sCFsf316r5N8jx%2BpDBHtheepPDv0%2BWdWrfWue8hk%2BxntNVvGTxFdB63vNL2ngJRnYE0QK7ljIa%2Bx79nNtRq5fjejWdHJNJMb7NoKSQ9EGdfu%2BVjPQ%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-23T08:29:27.365Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-23T08:29:27.366Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-23T08:29:27.379Z] Total Function Deployment time: 1199
[debug] [2023-10-23T08:29:27.379Z] 1 Functions Deployed
[debug] [2023-10-23T08:29:27.379Z] 1 Functions Errored
[debug] [2023-10-23T08:29:27.379Z] 0 Function Deployments Aborted
[debug] [2023-10-23T08:29:27.379Z] Average Function Deployment time: 1197
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-23T08:29:30.162Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-23T08:29:30.164Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-23T08:29:30.166Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:29:31.462Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-23T08:29:31.462Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/virtual-menu-59b9e"}}]}}
[debug] [2023-10-23T08:29:31.474Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:29:31.475Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:29:31.475Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T08:29:31.478Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:29:32.746Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:29:32.746Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:29:32.746Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T08:29:32.848Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:29:34.162Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:29:34.162Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:29:34.162Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-23T08:29:34.164Z] Functions deploy failed.
[debug] [2023-10-23T08:29:34.164Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-23T08:29:35.111Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2023-10-23T08:35:13.811Z] ----------------------------------------------------------------------
[debug] [2023-10-23T08:35:13.813Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy
[debug] [2023-10-23T08:35:13.813Z] CLI Version:   12.7.0
[debug] [2023-10-23T08:35:13.813Z] Platform:      darwin
[debug] [2023-10-23T08:35:13.814Z] Node Version:  v18.15.0
[debug] [2023-10-23T08:35:13.824Z] Time:          Mon Oct 23 2023 14:05:13 GMT+0530 (India Standard Time)
[debug] [2023-10-23T08:35:13.825Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-23T08:35:13.880Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:35:13.881Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:35:13.881Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:35:13.881Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:35:13.881Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:35:13.881Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:35:13.881Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:35:13.882Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:35:13.882Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:35:13.882Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-23T08:35:13.882Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:35:13.882Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:35:13.882Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:35:13.882Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:35:13.882Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:35:13.882Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T08:35:13.882Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-23T08:35:13.882Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T08:35:13.886Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-23T08:35:13.886Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-23T08:35:13.886Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-10-23T08:35:13.888Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-23T08:35:13.888Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:35:13.888Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T08:35:15.312Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-23T08:35:15.312Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T08:35:15.313Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-23T08:35:15.313Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T08:35:16.690Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-23T08:35:16.690Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T08:35:16.691Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:35:18.291Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:35:18.292Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2023-10-23T08:35:18.296Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:35:19.485Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:35:19.485Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-23T08:35:19.487Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-23T08:35:19.487Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:35:19.488Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-23T08:35:19.489Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:35:19.490Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-23T08:35:19.490Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:35:19.491Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-23T08:35:19.491Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:35:21.261Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-23T08:35:21.261Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-23T08:35:21.271Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-23T08:35:21.271Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-23T08:35:21.276Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-23T08:35:21.276Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-23T08:35:22.283Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-23T08:35:22.284Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-23T08:35:22.286Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-23T08:35:23.655Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-23T08:35:23.656Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-23T08:35:23.657Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-23T08:35:25.717Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-23T08:35:25.717Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-23T08:35:25.721Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-23T08:35:28.028Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-23T08:35:28.028Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-23T08:35:28.150Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-23T08:35:29.940Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T08:35:29.941Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-23T08:35:29.944Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-23T08:35:31.358Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T08:35:31.358Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-23T08:35:31.365Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:35:32.458Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:35:32.458Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-23T08:35:32.463Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions [none]
[debug] [2023-10-23T08:35:32.463Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T08:35:34.723Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions 200
[debug] [2023-10-23T08:35:34.723Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"name":"projects/224436038053/sites/virtual-menu-59b9e/versions/855f6d65aa4b1a8f","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T08:35:34.725Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-23T08:35:34.725Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-23T08:35:36.286Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-23T08:35:36.288Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/64efd9d1-b39d-42ea-9df6-08f2bfb1d057.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698051937&Signature=cNfgUhlIWfyKvsEiykX8gEbMHo%2BBjTTrVOcwawT9cjx0tjE9tRe8RykGruQG7lyx6CDznn3nrZeLSBmyPXO%2FUtII0FtyxoF%2BujNL6IVHgxg5jwcX6tJrbQVJ8jrA8WyqWBt5%2B28NHJ4X%2FaKvJUvgs45p9wlimqAHLesrwN1IrGyfW1XfjaGIB9b7f6CXgXQcX1dNgsb3%2BzMSMGZd6LavyDi%2Fg9xegVacK6gxxtXuak5IFKYiMCaAS8SqIkLtq2%2BdQidJXQ9LsPfM1ND%2FIj6dB2nl7FmW54zyZtocrQoenst%2BuPLPt2evv0KjoHMyaCP9%2B4j5QVsrUz2SzAV6q%2BoYCQ%3D%3D"}
[debug] [2023-10-23T08:35:36.290Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/64efd9d1-b39d-42ea-9df6-08f2bfb1d057.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698051937&Signature=cNfgUhlIWfyKvsEiykX8gEbMHo%2BBjTTrVOcwawT9cjx0tjE9tRe8RykGruQG7lyx6CDznn3nrZeLSBmyPXO%2FUtII0FtyxoF%2BujNL6IVHgxg5jwcX6tJrbQVJ8jrA8WyqWBt5%2B28NHJ4X%2FaKvJUvgs45p9wlimqAHLesrwN1IrGyfW1XfjaGIB9b7f6CXgXQcX1dNgsb3%2BzMSMGZd6LavyDi%2Fg9xegVacK6gxxtXuak5IFKYiMCaAS8SqIkLtq2%2BdQidJXQ9LsPfM1ND%2FIj6dB2nl7FmW54zyZtocrQoenst%2BuPLPt2evv0KjoHMyaCP9%2B4j5QVsrUz2SzAV6q%2BoYCQ%3D%3D
[debug] [2023-10-23T08:35:36.290Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/64efd9d1-b39d-42ea-9df6-08f2bfb1d057.zip [stream]
[debug] [2023-10-23T08:35:38.112Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/64efd9d1-b39d-42ea-9df6-08f2bfb1d057.zip 200
[debug] [2023-10-23T08:35:38.113Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/64efd9d1-b39d-42ea-9df6-08f2bfb1d057.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  hosting[virtual-menu-59b9e]: beginning deploy... 
[info] i  hosting[virtual-menu-59b9e]: found 3 files in public 
[debug] [2023-10-23T08:35:38.120Z] [hosting] uploading with 200 concurrency
[debug] [2023-10-23T08:35:38.127Z] [hosting] hash cache [cHVibGlj] stored for 3 files
[debug] [2023-10-23T08:35:38.128Z] [hosting][hash queue][FINAL] {"max":0,"min":0,"avg":0,"active":0,"complete":3,"success":3,"errored":0,"retried":0,"total":3,"elapsed":4}
[debug] [2023-10-23T08:35:38.128Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/855f6d65aa4b1a8f:populateFiles [none]
[debug] [2023-10-23T08:35:38.128Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/855f6d65aa4b1a8f:populateFiles {"files":{"/404.html":"05cbc6f94d7a69ce2e29646eab13be2c884e61ba93e3094df5028866876d18b3","/apple-app-site-association.json":"ed96e7f11a450905e5392238ead7509ba612fe0aac905baecc75cc5e0577fc05","/index.html":"d214aae81e8d3e872b168d47bd7055ff176e1e50117eacb830d5498a31e05311"}}
[debug] [2023-10-23T08:35:39.757Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/855f6d65aa4b1a8f:populateFiles 200
[debug] [2023-10-23T08:35:39.758Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/855f6d65aa4b1a8f:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/virtual-menu-59b9e/versions/855f6d65aa4b1a8f/files"}
[debug] [2023-10-23T08:35:39.758Z] [hosting][populate queue][FINAL] {"max":1633,"min":1633,"avg":1633,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":1633}
[debug] [2023-10-23T08:35:39.758Z] [hosting] uploads queued: 0
[debug] [2023-10-23T08:35:39.758Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1698050139758}
[info] ✔  hosting[virtual-menu-59b9e]: file upload complete 
[debug] [2023-10-23T08:35:39.759Z] [hosting] deploy completed after 1643ms
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-23T08:35:39.763Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-23T08:35:39.763Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/64efd9d1-b39d-42ea-9df6-08f2bfb1d057.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698051937&Signature=cNfgUhlIWfyKvsEiykX8gEbMHo%2BBjTTrVOcwawT9cjx0tjE9tRe8RykGruQG7lyx6CDznn3nrZeLSBmyPXO%2FUtII0FtyxoF%2BujNL6IVHgxg5jwcX6tJrbQVJ8jrA8WyqWBt5%2B28NHJ4X%2FaKvJUvgs45p9wlimqAHLesrwN1IrGyfW1XfjaGIB9b7f6CXgXQcX1dNgsb3%2BzMSMGZd6LavyDi%2Fg9xegVacK6gxxtXuak5IFKYiMCaAS8SqIkLtq2%2BdQidJXQ9LsPfM1ND%2FIj6dB2nl7FmW54zyZtocrQoenst%2BuPLPt2evv0KjoHMyaCP9%2B4j5QVsrUz2SzAV6q%2BoYCQ%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-23T08:35:41.009Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-23T08:35:41.009Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-23T08:35:41.020Z] Total Function Deployment time: 1251
[debug] [2023-10-23T08:35:41.020Z] 1 Functions Deployed
[debug] [2023-10-23T08:35:41.020Z] 1 Functions Errored
[debug] [2023-10-23T08:35:41.020Z] 0 Function Deployments Aborted
[debug] [2023-10-23T08:35:41.020Z] Average Function Deployment time: 1250
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-23T08:35:42.122Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-23T08:35:42.125Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-23T08:35:42.127Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:35:43.657Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-23T08:35:43.657Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/virtual-menu-59b9e"}}]}}
[debug] [2023-10-23T08:35:44.238Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:35:44.238Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:35:44.239Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T08:35:44.240Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:35:45.513Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:35:45.513Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:35:45.514Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T08:35:45.615Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:35:46.946Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:35:46.946Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:35:46.946Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-23T08:35:46.947Z] Functions deploy failed.
[debug] [2023-10-23T08:35:46.947Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-23T08:35:47.972Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2023-10-23T08:37:50.691Z] ----------------------------------------------------------------------
[debug] [2023-10-23T08:37:50.692Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy
[debug] [2023-10-23T08:37:50.692Z] CLI Version:   12.7.0
[debug] [2023-10-23T08:37:50.693Z] Platform:      darwin
[debug] [2023-10-23T08:37:50.693Z] Node Version:  v18.15.0
[debug] [2023-10-23T08:37:50.698Z] Time:          Mon Oct 23 2023 14:07:50 GMT+0530 (India Standard Time)
[debug] [2023-10-23T08:37:50.698Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-23T08:37:50.752Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:37:50.753Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:37:50.753Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:37:50.753Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:37:50.753Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:37:50.753Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:37:50.753Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:37:50.753Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:37:50.753Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:37:50.753Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-23T08:37:50.754Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:37:50.754Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:37:50.754Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:37:50.754Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:37:50.754Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:37:50.754Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T08:37:50.754Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-23T08:37:50.754Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T08:37:50.758Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-23T08:37:50.763Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-23T08:37:50.763Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-10-23T08:37:50.766Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-23T08:37:50.766Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:37:50.766Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T08:37:51.872Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-23T08:37:51.873Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T08:37:51.873Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-23T08:37:51.874Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T08:37:52.969Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-23T08:37:52.969Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T08:37:52.972Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:37:54.027Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:37:54.028Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2023-10-23T08:37:54.036Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:37:55.252Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:37:55.252Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-23T08:37:55.255Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-23T08:37:55.255Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:37:55.258Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-23T08:37:55.258Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:37:55.261Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-23T08:37:55.261Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:37:55.264Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-23T08:37:55.264Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:37:56.861Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-23T08:37:56.861Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-23T08:37:56.865Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-23T08:37:56.865Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-23T08:37:56.867Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-23T08:37:56.867Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-23T08:37:58.734Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-23T08:37:58.734Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-23T08:37:58.735Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-23T08:38:00.167Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-23T08:38:00.168Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-23T08:38:00.170Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-23T08:38:01.557Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-23T08:38:01.557Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-23T08:38:01.560Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-23T08:38:03.442Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-23T08:38:03.443Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-23T08:38:03.564Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-23T08:38:04.939Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T08:38:04.940Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-23T08:38:04.942Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-23T08:38:06.404Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T08:38:06.405Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-23T08:38:06.426Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:38:07.506Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:38:07.507Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-23T08:38:07.514Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions [none]
[debug] [2023-10-23T08:38:07.515Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T08:38:09.490Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions 200
[debug] [2023-10-23T08:38:09.490Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"name":"projects/224436038053/sites/virtual-menu-59b9e/versions/596b1a670a5cfede","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T08:38:09.492Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-23T08:38:09.492Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-23T08:38:10.949Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-23T08:38:10.950Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/3164102a-d8d3-48ab-94f9-19793c379e57.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698052092&Signature=jNSBeg9ztZsQ7sb8efJlv4vLxp9vsvV1rF1Efod%2FiNM9Uf59be8jFtObOTv8kUN0BqFZMX86YdJwBEQxtAqOVX30wos35FKDCyMf20P19RMQ0%2BdtLVStRtf7yzGxFIR8sRv7PiEpmV%2B5bfnBFAN7Lw1HbOWoWf1Gl9wOVjy4SmzfgHT%2BzpuOd89XZxQNsgJ093PLC66SNgJFqx38vlcXwbd2gyAV4VgCRbCFmlAqEsGM8VXUeUT9UPKo95RLKdgF70HXs%2Fa6re74tKl1r%2B1TgGM3K4xKVmvEzh1pixRppJDXo4FSEhXTduZQB86HM9R4cp9rY%2Bqp3T0pJSc%2B1WwRDA%3D%3D"}
[debug] [2023-10-23T08:38:10.951Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/3164102a-d8d3-48ab-94f9-19793c379e57.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698052092&Signature=jNSBeg9ztZsQ7sb8efJlv4vLxp9vsvV1rF1Efod%2FiNM9Uf59be8jFtObOTv8kUN0BqFZMX86YdJwBEQxtAqOVX30wos35FKDCyMf20P19RMQ0%2BdtLVStRtf7yzGxFIR8sRv7PiEpmV%2B5bfnBFAN7Lw1HbOWoWf1Gl9wOVjy4SmzfgHT%2BzpuOd89XZxQNsgJ093PLC66SNgJFqx38vlcXwbd2gyAV4VgCRbCFmlAqEsGM8VXUeUT9UPKo95RLKdgF70HXs%2Fa6re74tKl1r%2B1TgGM3K4xKVmvEzh1pixRppJDXo4FSEhXTduZQB86HM9R4cp9rY%2Bqp3T0pJSc%2B1WwRDA%3D%3D
[debug] [2023-10-23T08:38:10.952Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/3164102a-d8d3-48ab-94f9-19793c379e57.zip [stream]
[debug] [2023-10-23T08:38:13.107Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/3164102a-d8d3-48ab-94f9-19793c379e57.zip 200
[debug] [2023-10-23T08:38:13.108Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/3164102a-d8d3-48ab-94f9-19793c379e57.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  hosting[virtual-menu-59b9e]: beginning deploy... 
[info] i  hosting[virtual-menu-59b9e]: found 3 files in public 
[debug] [2023-10-23T08:38:13.116Z] [hosting] uploading with 200 concurrency
[debug] [2023-10-23T08:38:13.125Z] [hosting] hash cache [cHVibGlj] stored for 3 files
[debug] [2023-10-23T08:38:13.125Z] [hosting][hash queue][FINAL] {"max":0,"min":0,"avg":0,"active":0,"complete":3,"success":3,"errored":0,"retried":0,"total":3,"elapsed":4}
[debug] [2023-10-23T08:38:13.126Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/596b1a670a5cfede:populateFiles [none]
[debug] [2023-10-23T08:38:13.126Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/596b1a670a5cfede:populateFiles {"files":{"/404.html":"05cbc6f94d7a69ce2e29646eab13be2c884e61ba93e3094df5028866876d18b3","/apple-app-site-association.json":"ed96e7f11a450905e5392238ead7509ba612fe0aac905baecc75cc5e0577fc05","/index.html":"d214aae81e8d3e872b168d47bd7055ff176e1e50117eacb830d5498a31e05311"}}
[debug] [2023-10-23T08:38:14.775Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/596b1a670a5cfede:populateFiles 200
[debug] [2023-10-23T08:38:14.775Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/596b1a670a5cfede:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/virtual-menu-59b9e/versions/596b1a670a5cfede/files"}
[debug] [2023-10-23T08:38:14.776Z] [hosting][populate queue][FINAL] {"max":1654,"min":1654,"avg":1654,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":1654}
[debug] [2023-10-23T08:38:14.776Z] [hosting] uploads queued: 0
[debug] [2023-10-23T08:38:14.776Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1698050294776}
[info] ✔  hosting[virtual-menu-59b9e]: file upload complete 
[debug] [2023-10-23T08:38:14.777Z] [hosting] deploy completed after 1667ms
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-23T08:38:14.782Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-23T08:38:14.784Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/3164102a-d8d3-48ab-94f9-19793c379e57.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698052092&Signature=jNSBeg9ztZsQ7sb8efJlv4vLxp9vsvV1rF1Efod%2FiNM9Uf59be8jFtObOTv8kUN0BqFZMX86YdJwBEQxtAqOVX30wos35FKDCyMf20P19RMQ0%2BdtLVStRtf7yzGxFIR8sRv7PiEpmV%2B5bfnBFAN7Lw1HbOWoWf1Gl9wOVjy4SmzfgHT%2BzpuOd89XZxQNsgJ093PLC66SNgJFqx38vlcXwbd2gyAV4VgCRbCFmlAqEsGM8VXUeUT9UPKo95RLKdgF70HXs%2Fa6re74tKl1r%2B1TgGM3K4xKVmvEzh1pixRppJDXo4FSEhXTduZQB86HM9R4cp9rY%2Bqp3T0pJSc%2B1WwRDA%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-23T08:38:16.422Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-23T08:38:16.422Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-23T08:38:16.433Z] Total Function Deployment time: 1644
[debug] [2023-10-23T08:38:16.433Z] 1 Functions Deployed
[debug] [2023-10-23T08:38:16.433Z] 1 Functions Errored
[debug] [2023-10-23T08:38:16.433Z] 0 Function Deployments Aborted
[debug] [2023-10-23T08:38:16.433Z] Average Function Deployment time: 1643
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-23T08:38:17.495Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-23T08:38:17.498Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-23T08:38:17.500Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:38:18.772Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-23T08:38:18.772Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/virtual-menu-59b9e","service":"artifactregistry.googleapis.com"}}]}}
[debug] [2023-10-23T08:38:18.799Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:38:18.799Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:38:18.800Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T08:38:18.802Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:38:20.200Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:38:20.201Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:38:20.201Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T08:38:20.303Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:38:21.646Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:38:21.647Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:38:21.647Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-23T08:38:21.648Z] Functions deploy failed.
[debug] [2023-10-23T08:38:21.648Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-23T08:38:22.691Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2023-10-23T08:38:26.587Z] ----------------------------------------------------------------------
[debug] [2023-10-23T08:38:26.589Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy --debug
[debug] [2023-10-23T08:38:26.589Z] CLI Version:   12.7.0
[debug] [2023-10-23T08:38:26.589Z] Platform:      darwin
[debug] [2023-10-23T08:38:26.589Z] Node Version:  v18.15.0
[debug] [2023-10-23T08:38:26.590Z] Time:          Mon Oct 23 2023 14:08:26 GMT+0530 (India Standard Time)
[debug] [2023-10-23T08:38:26.590Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-23T08:38:26.648Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:38:26.649Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:38:26.650Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:38:26.650Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:38:26.650Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:38:26.650Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:38:26.650Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:38:26.650Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:38:26.650Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-23T08:38:26.651Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-23T08:38:26.661Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:38:26.661Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:38:26.661Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:38:26.661Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:38:26.661Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-23T08:38:26.661Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T08:38:26.661Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-23T08:38:26.662Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-23T08:38:26.666Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-23T08:38:26.666Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-23T08:38:26.666Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-10-23T08:38:26.672Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-23T08:38:26.673Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:38:26.673Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T08:38:27.783Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-23T08:38:27.784Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-23T08:38:27.784Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-23T08:38:27.784Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T08:38:29.063Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-23T08:38:29.063Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-23T08:38:29.065Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:38:30.425Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:38:30.426Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2023-10-23T08:38:30.431Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:38:31.568Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:38:31.568Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-23T08:38:31.570Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-23T08:38:31.570Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:38:31.573Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-23T08:38:31.573Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:38:31.575Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-23T08:38:31.575Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:38:31.578Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-23T08:38:31.579Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-23T08:38:32.916Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-23T08:38:32.917Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-23T08:38:32.932Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-23T08:38:32.932Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-23T08:38:33.135Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-23T08:38:33.135Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-23T08:38:33.289Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-23T08:38:33.289Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-23T08:38:33.290Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-23T08:38:34.870Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-23T08:38:34.871Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-23T08:38:34.871Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-23T08:38:36.055Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-23T08:38:36.056Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-23T08:38:36.060Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-23T08:38:38.259Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-23T08:38:38.259Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-23T08:38:38.375Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-23T08:38:39.894Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T08:38:39.895Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-23T08:38:39.897Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-23T08:38:41.583Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-23T08:38:41.583Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-23T08:38:41.588Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-23T08:38:42.709Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-23T08:38:42.709Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-23T08:38:42.714Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions [none]
[debug] [2023-10-23T08:38:42.715Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T08:38:44.660Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions 200
[debug] [2023-10-23T08:38:44.661Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"name":"projects/224436038053/sites/virtual-menu-59b9e/versions/c89dd5e51d9b5f07","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-23T08:38:44.663Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-23T08:38:44.663Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-23T08:38:46.191Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-23T08:38:46.191Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/61350273-24ac-4d3f-bb1f-55623c014855.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698052127&Signature=oMjGcwyVbyplEjkMc%2FNH3W257sf7NTjuKEOiUwont13XVNIGgjnIKSLIIG6bpFoBJBcHFxinVVW8%2F5MLkJ5htvQ2GzZjQfk9r2pg2CexT5kPhP%2B%2FNiIA7x94P7iICnf7STOauKo9XLLLiGS30X8A6DPOoY1m7yit8gXOK%2F7iteKXxS0uvv1p846rzFVGIDW3cPCcyAW3FhfpthRA6wEzeiPKiD5Gvu7uKZzrfHWvHlz3XjLkmngW0kLfDJjiaSQu1Xsrh3VJ4de%2B50Vbi0xrr1gJXjFEuA4S4v0xXMntpQelrxiw%2FTmxVwEWAEFsag4ZPpkzZB%2BIE8Js6ZYLIwyDCg%3D%3D"}
[debug] [2023-10-23T08:38:46.193Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/61350273-24ac-4d3f-bb1f-55623c014855.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698052127&Signature=oMjGcwyVbyplEjkMc%2FNH3W257sf7NTjuKEOiUwont13XVNIGgjnIKSLIIG6bpFoBJBcHFxinVVW8%2F5MLkJ5htvQ2GzZjQfk9r2pg2CexT5kPhP%2B%2FNiIA7x94P7iICnf7STOauKo9XLLLiGS30X8A6DPOoY1m7yit8gXOK%2F7iteKXxS0uvv1p846rzFVGIDW3cPCcyAW3FhfpthRA6wEzeiPKiD5Gvu7uKZzrfHWvHlz3XjLkmngW0kLfDJjiaSQu1Xsrh3VJ4de%2B50Vbi0xrr1gJXjFEuA4S4v0xXMntpQelrxiw%2FTmxVwEWAEFsag4ZPpkzZB%2BIE8Js6ZYLIwyDCg%3D%3D
[debug] [2023-10-23T08:38:46.193Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/61350273-24ac-4d3f-bb1f-55623c014855.zip [stream]
[debug] [2023-10-23T08:38:47.720Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/61350273-24ac-4d3f-bb1f-55623c014855.zip 200
[debug] [2023-10-23T08:38:47.720Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/61350273-24ac-4d3f-bb1f-55623c014855.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  hosting[virtual-menu-59b9e]: beginning deploy... 
[info] i  hosting[virtual-menu-59b9e]: found 3 files in public 
[debug] [2023-10-23T08:38:47.730Z] [hosting] uploading with 200 concurrency
[debug] [2023-10-23T08:38:47.736Z] [hosting] hash cache [cHVibGlj] stored for 3 files
[debug] [2023-10-23T08:38:47.736Z] [hosting][hash queue][FINAL] {"max":1,"min":0,"avg":0,"active":0,"complete":3,"success":3,"errored":0,"retried":0,"total":3,"elapsed":4}
[debug] [2023-10-23T08:38:47.736Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/c89dd5e51d9b5f07:populateFiles [none]
[debug] [2023-10-23T08:38:47.736Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/c89dd5e51d9b5f07:populateFiles {"files":{"/404.html":"05cbc6f94d7a69ce2e29646eab13be2c884e61ba93e3094df5028866876d18b3","/apple-app-site-association.json":"ed96e7f11a450905e5392238ead7509ba612fe0aac905baecc75cc5e0577fc05","/index.html":"d214aae81e8d3e872b168d47bd7055ff176e1e50117eacb830d5498a31e05311"}}
[debug] [2023-10-23T08:38:49.422Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/c89dd5e51d9b5f07:populateFiles 200
[debug] [2023-10-23T08:38:49.423Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/c89dd5e51d9b5f07:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/virtual-menu-59b9e/versions/c89dd5e51d9b5f07/files"}
[debug] [2023-10-23T08:38:49.424Z] [hosting][populate queue][FINAL] {"max":1691,"min":1691,"avg":1691,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":1691}
[debug] [2023-10-23T08:38:49.424Z] [hosting] uploads queued: 0
[debug] [2023-10-23T08:38:49.424Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1698050329424}
[info] i  hosting: upload complete 
[info] ✔  hosting[virtual-menu-59b9e]: file upload complete 
[debug] [2023-10-23T08:38:49.425Z] [hosting] deploy completed after 1702ms
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-23T08:38:49.432Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-23T08:38:49.432Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/61350273-24ac-4d3f-bb1f-55623c014855.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698052127&Signature=oMjGcwyVbyplEjkMc%2FNH3W257sf7NTjuKEOiUwont13XVNIGgjnIKSLIIG6bpFoBJBcHFxinVVW8%2F5MLkJ5htvQ2GzZjQfk9r2pg2CexT5kPhP%2B%2FNiIA7x94P7iICnf7STOauKo9XLLLiGS30X8A6DPOoY1m7yit8gXOK%2F7iteKXxS0uvv1p846rzFVGIDW3cPCcyAW3FhfpthRA6wEzeiPKiD5Gvu7uKZzrfHWvHlz3XjLkmngW0kLfDJjiaSQu1Xsrh3VJ4de%2B50Vbi0xrr1gJXjFEuA4S4v0xXMntpQelrxiw%2FTmxVwEWAEFsag4ZPpkzZB%2BIE8Js6ZYLIwyDCg%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-23T08:38:50.633Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-23T08:38:50.634Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-23T08:38:50.646Z] Total Function Deployment time: 1206
[debug] [2023-10-23T08:38:50.646Z] 1 Functions Deployed
[debug] [2023-10-23T08:38:50.646Z] 1 Functions Errored
[debug] [2023-10-23T08:38:50.647Z] 0 Function Deployments Aborted
[debug] [2023-10-23T08:38:50.647Z] Average Function Deployment time: 1205
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-23T08:38:51.724Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-23T08:38:51.727Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-23T08:38:51.729Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:38:52.959Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-23T08:38:52.959Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/virtual-menu-59b9e"}}]}}
[debug] [2023-10-23T08:38:52.965Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:38:52.966Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:38:52.966Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T08:38:52.969Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:38:54.292Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:38:54.292Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:38:54.293Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-23T08:38:54.396Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-23T08:38:55.733Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-23T08:38:55.734Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-23T08:38:55.734Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-23T08:38:55.735Z] Functions deploy failed.
[debug] [2023-10-23T08:38:55.735Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-23T08:38:56.785Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2023-10-24T17:57:10.335Z] ----------------------------------------------------------------------
[debug] [2023-10-24T17:57:10.336Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy
[debug] [2023-10-24T17:57:10.337Z] CLI Version:   12.7.0
[debug] [2023-10-24T17:57:10.337Z] Platform:      darwin
[debug] [2023-10-24T17:57:10.337Z] Node Version:  v18.15.0
[debug] [2023-10-24T17:57:10.341Z] Time:          Tue Oct 24 2023 10:57:10 GMT-0700 (Pacific Daylight Time)
[debug] [2023-10-24T17:57:10.341Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-24T17:57:10.343Z] >>> [apiv2][query] GET https://firebase-public.firebaseio.com/cli.json [none]
[debug] [2023-10-24T17:57:10.423Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:57:10.423Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:57:10.423Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:57:10.423Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:57:10.423Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:57:10.423Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-24T17:57:10.423Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-24T17:57:10.424Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-24T17:57:10.424Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-24T17:57:10.424Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-24T17:57:10.424Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:57:10.424Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:57:10.424Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:57:10.424Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:57:10.424Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:57:10.424Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-24T17:57:10.424Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-24T17:57:10.424Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-24T17:57:10.429Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-24T17:57:10.429Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-24T17:57:10.429Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-10-24T17:57:10.429Z] > refreshing access token with scopes: []
[debug] [2023-10-24T17:57:10.430Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2023-10-24T17:57:10.430Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-10-24T17:57:11.251Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2023-10-24T17:57:11.252Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-10-24T17:57:11.267Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-24T17:57:11.267Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-24T17:57:11.267Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-24T17:57:11.287Z] <<< [apiv2][status] GET https://firebase-public.firebaseio.com/cli.json 200
[debug] [2023-10-24T17:57:11.287Z] <<< [apiv2][body] GET https://firebase-public.firebaseio.com/cli.json {"cloudBuildErrorAfter":1594252800000,"cloudBuildWarnAfter":1590019200000,"defaultNode10After":1594252800000,"minVersion":"3.0.5","node8DeploysDisabledAfter":1613390400000,"node8RuntimeDisabledAfter":1615809600000,"node8WarnAfter":1600128000000}
[debug] [2023-10-24T17:57:11.760Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-24T17:57:11.761Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-24T17:57:11.762Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-24T17:57:11.762Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-24T17:57:12.285Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-24T17:57:12.285Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-24T17:57:12.288Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-24T17:57:12.806Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-24T17:57:12.807Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2023-10-24T17:57:12.812Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-24T17:57:13.330Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-24T17:57:13.330Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-24T17:57:13.333Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-24T17:57:13.333Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-24T17:57:13.335Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-24T17:57:13.335Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-24T17:57:13.337Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-24T17:57:13.337Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-24T17:57:13.339Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-24T17:57:13.339Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-24T17:57:13.865Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-24T17:57:13.865Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-24T17:57:13.868Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-24T17:57:13.868Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-24T17:57:13.869Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-24T17:57:13.870Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-24T17:57:13.871Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-24T17:57:13.871Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-24T17:57:13.872Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-24T17:57:14.380Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-24T17:57:14.380Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-24T17:57:14.381Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-24T17:57:14.904Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-24T17:57:14.904Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-24T17:57:14.907Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-24T17:57:15.511Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-24T17:57:15.511Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-24T17:57:15.641Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-24T17:57:16.476Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-24T17:57:16.477Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-24T17:57:16.481Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-24T17:57:17.536Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-24T17:57:17.537Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-24T17:57:17.545Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-24T17:57:18.053Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-24T17:57:18.054Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-24T17:57:18.061Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions [none]
[debug] [2023-10-24T17:57:18.061Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-24T17:57:19.099Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions 200
[debug] [2023-10-24T17:57:19.100Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"name":"projects/224436038053/sites/virtual-menu-59b9e/versions/5a8db166c641a1ed","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-24T17:57:19.103Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-24T17:57:19.104Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-24T17:57:19.626Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-24T17:57:19.627Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/de26c259-14e1-4c1a-ad3f-5d68f86c59e9.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698172039&Signature=gH8P7a%2F1n0Rtf40AT526ijVLcchOY1XhQ6qEA33ZUZ7%2FIDWu3zPtFr5BEeAqw2uTwgCYi%2FqaEtE2QnZ3xZl4E2bpwLKQYfzD0y0qFObJoZE7JzhSWnkOtbDWvYlfDZMSDpXJiwPKhqaPURmQo7XtobS%2Bypu0qXnu0xvMwftK2SiSDy2bWywpxVEK2cHO2Qy5P93QlbHZA%2Fk0R3hGy%2FoNUiJn3pVMmS%2BqbOllcstkIkNgaa2HfmewhL2sSyPA%2B1lyh5KLhxCSwRdcXNrZP4cP%2FhMEVP2oEC9OGuHzBaAqBM1dDoWqimK7%2BptafStKRTvXpqXWW%2BLjXX1bKDGxOzS23Q%3D%3D"}
[debug] [2023-10-24T17:57:19.629Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/de26c259-14e1-4c1a-ad3f-5d68f86c59e9.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698172039&Signature=gH8P7a%2F1n0Rtf40AT526ijVLcchOY1XhQ6qEA33ZUZ7%2FIDWu3zPtFr5BEeAqw2uTwgCYi%2FqaEtE2QnZ3xZl4E2bpwLKQYfzD0y0qFObJoZE7JzhSWnkOtbDWvYlfDZMSDpXJiwPKhqaPURmQo7XtobS%2Bypu0qXnu0xvMwftK2SiSDy2bWywpxVEK2cHO2Qy5P93QlbHZA%2Fk0R3hGy%2FoNUiJn3pVMmS%2BqbOllcstkIkNgaa2HfmewhL2sSyPA%2B1lyh5KLhxCSwRdcXNrZP4cP%2FhMEVP2oEC9OGuHzBaAqBM1dDoWqimK7%2BptafStKRTvXpqXWW%2BLjXX1bKDGxOzS23Q%3D%3D
[debug] [2023-10-24T17:57:19.630Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/de26c259-14e1-4c1a-ad3f-5d68f86c59e9.zip [stream]
[debug] [2023-10-24T17:57:20.142Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/de26c259-14e1-4c1a-ad3f-5d68f86c59e9.zip 200
[debug] [2023-10-24T17:57:20.142Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/de26c259-14e1-4c1a-ad3f-5d68f86c59e9.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  hosting[virtual-menu-59b9e]: beginning deploy... 
[info] i  hosting[virtual-menu-59b9e]: found 3 files in public 
[debug] [2023-10-24T17:57:20.149Z] [hosting] uploading with 200 concurrency
[debug] [2023-10-24T17:57:20.155Z] [hosting] hash cache [cHVibGlj] stored for 3 files
[debug] [2023-10-24T17:57:20.155Z] [hosting][hash queue][FINAL] {"max":0,"min":0,"avg":0,"active":0,"complete":3,"success":3,"errored":0,"retried":0,"total":3,"elapsed":3}
[debug] [2023-10-24T17:57:20.155Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/5a8db166c641a1ed:populateFiles [none]
[debug] [2023-10-24T17:57:20.155Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/5a8db166c641a1ed:populateFiles {"files":{"/404.html":"05cbc6f94d7a69ce2e29646eab13be2c884e61ba93e3094df5028866876d18b3","/apple-app-site-association.json":"ed96e7f11a450905e5392238ead7509ba612fe0aac905baecc75cc5e0577fc05","/index.html":"d214aae81e8d3e872b168d47bd7055ff176e1e50117eacb830d5498a31e05311"}}
[debug] [2023-10-24T17:57:20.669Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/5a8db166c641a1ed:populateFiles 200
[debug] [2023-10-24T17:57:20.669Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/5a8db166c641a1ed:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/virtual-menu-59b9e/versions/5a8db166c641a1ed/files"}
[debug] [2023-10-24T17:57:20.670Z] [hosting][populate queue][FINAL] {"max":517,"min":517,"avg":517,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":517}
[debug] [2023-10-24T17:57:20.670Z] [hosting] uploads queued: 0
[debug] [2023-10-24T17:57:20.670Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1698170240670}
[info] ✔  hosting[virtual-menu-59b9e]: file upload complete 
[debug] [2023-10-24T17:57:20.672Z] [hosting] deploy completed after 528ms
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-24T17:57:20.680Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-24T17:57:20.680Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/de26c259-14e1-4c1a-ad3f-5d68f86c59e9.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698172039&Signature=gH8P7a%2F1n0Rtf40AT526ijVLcchOY1XhQ6qEA33ZUZ7%2FIDWu3zPtFr5BEeAqw2uTwgCYi%2FqaEtE2QnZ3xZl4E2bpwLKQYfzD0y0qFObJoZE7JzhSWnkOtbDWvYlfDZMSDpXJiwPKhqaPURmQo7XtobS%2Bypu0qXnu0xvMwftK2SiSDy2bWywpxVEK2cHO2Qy5P93QlbHZA%2Fk0R3hGy%2FoNUiJn3pVMmS%2BqbOllcstkIkNgaa2HfmewhL2sSyPA%2B1lyh5KLhxCSwRdcXNrZP4cP%2FhMEVP2oEC9OGuHzBaAqBM1dDoWqimK7%2BptafStKRTvXpqXWW%2BLjXX1bKDGxOzS23Q%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-24T17:57:21.053Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-24T17:57:21.054Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-24T17:57:21.071Z] Total Function Deployment time: 382
[debug] [2023-10-24T17:57:21.071Z] 1 Functions Deployed
[debug] [2023-10-24T17:57:21.071Z] 1 Functions Errored
[debug] [2023-10-24T17:57:21.071Z] 0 Function Deployments Aborted
[debug] [2023-10-24T17:57:21.071Z] Average Function Deployment time: 380
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-24T17:57:21.149Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-24T17:57:21.153Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-24T17:57:21.155Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-24T17:57:21.560Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-24T17:57:21.561Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-24T17:57:21.561Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-24T17:57:21.563Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-24T17:57:21.567Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-24T17:57:21.568Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/virtual-menu-59b9e"}}]}}
[debug] [2023-10-24T17:57:22.043Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-24T17:57:22.044Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-24T17:57:22.044Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-24T17:57:22.146Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-24T17:57:22.579Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-24T17:57:22.580Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-24T17:57:22.580Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-24T17:57:22.581Z] Functions deploy failed.
[debug] [2023-10-24T17:57:22.582Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-24T17:57:22.655Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2023-10-24T17:58:22.523Z] ----------------------------------------------------------------------
[debug] [2023-10-24T17:58:22.525Z] Command:       /usr/local/bin/node /Users/rohantyagi/.npm-global/bin/firebase deploy --debug
[debug] [2023-10-24T17:58:22.525Z] CLI Version:   12.7.0
[debug] [2023-10-24T17:58:22.525Z] Platform:      darwin
[debug] [2023-10-24T17:58:22.526Z] Node Version:  v18.15.0
[debug] [2023-10-24T17:58:22.531Z] Time:          Tue Oct 24 2023 10:58:22 GMT-0700 (Pacific Daylight Time)
[debug] [2023-10-24T17:58:22.531Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-24T17:58:22.579Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:58:22.580Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:58:22.580Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:58:22.580Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:58:22.580Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:58:22.580Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-24T17:58:22.581Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-24T17:58:22.581Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-24T17:58:22.581Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"dynamicLinks"}
[debug] [2023-10-24T17:58:22.581Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"destination"}
[debug] [2023-10-24T17:58:22.581Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:58:22.581Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:58:22.582Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:58:22.582Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:58:22.582Z] Object ".hosting.rewrites[0]" in "firebase.json" has unknown property: {"additionalProperty":"source"}
[debug] [2023-10-24T17:58:22.582Z] Field ".hosting.rewrites[0]" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-24T17:58:22.582Z] Field ".hosting" in "firebase.json" is possibly invalid: should be array
[debug] [2023-10-24T17:58:22.582Z] Field ".hosting" in "firebase.json" is possibly invalid: should match some schema in anyOf
[debug] [2023-10-24T17:58:22.585Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-24T17:58:22.585Z] > authorizing via signed-in user (yumzzapp@gmail.com)
[debug] [2023-10-24T17:58:22.586Z] [iam] checking project virtual-menu-59b9e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-10-24T17:58:22.588Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions [none]
[debug] [2023-10-24T17:58:22.588Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-24T17:58:22.588Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-24T17:58:23.097Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions 200
[debug] [2023-10-24T17:58:23.097Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/virtual-menu-59b9e:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-10-24T17:58:23.098Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-24T17:58:23.098Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-24T17:58:23.741Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-24T17:58:23.741Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/virtual-menu-59b9e/serviceAccounts/virtual-menu-59b9e@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-24T17:58:23.742Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-24T17:58:24.675Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-24T17:58:24.675Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] 
[info] === Deploying to 'virtual-menu-59b9e'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2023-10-24T17:58:24.678Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-24T17:58:24.974Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-24T17:58:24.974Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-24T17:58:24.976Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-24T17:58:24.976Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-24T17:58:24.977Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-24T17:58:24.977Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-24T17:58:24.978Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-24T17:58:24.978Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-24T17:58:24.980Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-24T17:58:24.980Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com x-goog-quota-user=projects/virtual-menu-59b9e
[debug] [2023-10-24T17:58:25.700Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-24T17:58:25.700Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-24T17:58:25.701Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com 200
[debug] [2023-10-24T17:58:25.701Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-24T17:58:25.702Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com 200
[debug] [2023-10-24T17:58:25.702Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-24T17:58:25.702Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-24T17:58:25.702Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/virtual-menu-59b9e/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-24T17:58:25.702Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig [none]
[debug] [2023-10-24T17:58:26.244Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig 200
[debug] [2023-10-24T17:58:26.244Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e/adminSdkConfig {"projectId":"virtual-menu-59b9e","databaseURL":"https://virtual-menu-59b9e.firebaseio.com","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"}
[debug] [2023-10-24T17:58:26.245Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs [none]
[debug] [2023-10-24T17:58:26.578Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs 200
[debug] [2023-10-24T17:58:26.579Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/virtual-menu-59b9e/configs {}
[debug] [2023-10-24T17:58:26.580Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-10-24T17:58:27.122Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-10-24T17:58:27.122Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.9.0). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/rohantyagi/Desktop/landing-website/functions (27.15 KB) for uploading 
[debug] [2023-10-24T17:58:27.273Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions [none]
[debug] [2023-10-24T17:58:27.691Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-24T17:58:27.691Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/-/functions {"functions":[{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/addBusinessEmail","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"addBusinessEmail","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2023-03-20T03:48:17.904Z","versionId":"13","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c918e645473408d3b44cd81d9cb5e4506a061297"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/51cd50e1-a607-49b4-8f15-63bbcf7f76f2.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"runtime":"nodejs10","ingressSettings":"ALLOW_ALL","buildId":"f64cef72-e4ee-41ac-8f5c-80d78aac50f9","buildName":"projects/224436038053/locations/us-central1/builds/f64cef72-e4ee-41ac-8f5c-80d78aac50f9","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/helloHttp","httpsTrigger":{"url":"https://us-central1-virtual-menu-59b9e.cloudfunctions.net/helloHttp","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"helloHttp","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"virtual-menu-59b9e@appspot.gserviceaccount.com","updateTime":"2020-11-15T00:23:51.516Z","versionId":"5","labels":{"deployment-tool":"cli-gcloud"},"sourceUploadUrl":"https://storage.googleapis.com/gcf-upload-us-central1-aa3ed4f3-d98d-46bf-b35d-2432cb14e188/2cbef110-994a-4c1f-b0b9-f10e6b241a8e.zip","runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"133c8fb6-5e04-4b6a-972f-a8ebfe2696e5","dockerRegistry":"CONTAINER_REGISTRY"}]}
[debug] [2023-10-24T17:58:27.692Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-24T17:58:28.178Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions 200
[debug] [2023-10-24T17:58:28.178Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/virtual-menu-59b9e/locations/-/functions {}
[debug] [2023-10-24T17:58:28.181Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e [none]
[debug] [2023-10-24T17:58:28.340Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e 200
[debug] [2023-10-24T17:58:28.341Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/virtual-menu-59b9e {"projectId":"virtual-menu-59b9e","projectNumber":"224436038053","displayName":"Virtual Menu","name":"projects/virtual-menu-59b9e","resources":{"hostingSite":"virtual-menu-59b9e","realtimeDatabaseInstance":"virtual-menu-59b9e","storageBucket":"virtual-menu-59b9e.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_0533ecba-a692-4dfd-8ffd-2744a6b6ddce"}
[debug] [2023-10-24T17:58:28.345Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions [none]
[debug] [2023-10-24T17:58:28.345Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-24T17:58:29.099Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions 200
[debug] [2023-10-24T17:58:29.100Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/virtual-menu-59b9e/versions {"name":"projects/224436038053/sites/virtual-menu-59b9e/versions/bb0f8f16ae2da177","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-10-24T17:58:29.101Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-24T17:58:29.101Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {}
[debug] [2023-10-24T17:58:29.616Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-24T17:58:29.616Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/dbd79205-d240-4d34-9446-e80356221867.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698172109&Signature=W6JTsEVXysDDQjp%2FTxBGgy3Y6s1%2BwDu1AemkIK7ZSZIkvAJGIKoEH9ktWy1zwEob2q%2Bp22iRxL3KPRdRgzU5WrwQEbaAB9Udox8LRt9EY8PWFDnTTCmOFf%2BuUMqbIIe1ZksEayo9vzlvxFUO48FY3%2B3n2tpu2ad4DLLeNEdD9SFHUrB8RcKEaa4bcODUgjrngmruC8c%2B5dALst3i0QL2JEq0Bm7XGYldbARCbqPhbHm%2BSW0ITcLYmmFlkUJzCVq8m0siW6OvcTaqusQ8CkZb6c71b758ilyOvUiQka9TFF2HbJzWNhu8xplr59ox%2BQt9hJAxCndjBzirSpUsBi4zjQ%3D%3D"}
[debug] [2023-10-24T17:58:29.617Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/dbd79205-d240-4d34-9446-e80356221867.zip GoogleAccessId=service-224436038053%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698172109&Signature=W6JTsEVXysDDQjp%2FTxBGgy3Y6s1%2BwDu1AemkIK7ZSZIkvAJGIKoEH9ktWy1zwEob2q%2Bp22iRxL3KPRdRgzU5WrwQEbaAB9Udox8LRt9EY8PWFDnTTCmOFf%2BuUMqbIIe1ZksEayo9vzlvxFUO48FY3%2B3n2tpu2ad4DLLeNEdD9SFHUrB8RcKEaa4bcODUgjrngmruC8c%2B5dALst3i0QL2JEq0Bm7XGYldbARCbqPhbHm%2BSW0ITcLYmmFlkUJzCVq8m0siW6OvcTaqusQ8CkZb6c71b758ilyOvUiQka9TFF2HbJzWNhu8xplr59ox%2BQt9hJAxCndjBzirSpUsBi4zjQ%3D%3D
[debug] [2023-10-24T17:58:29.617Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/dbd79205-d240-4d34-9446-e80356221867.zip [stream]
[debug] [2023-10-24T17:58:29.920Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/dbd79205-d240-4d34-9446-e80356221867.zip 200
[debug] [2023-10-24T17:58:29.921Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/dbd79205-d240-4d34-9446-e80356221867.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  hosting[virtual-menu-59b9e]: beginning deploy... 
[info] i  hosting[virtual-menu-59b9e]: found 3 files in public 
[debug] [2023-10-24T17:58:29.930Z] [hosting] uploading with 200 concurrency
[debug] [2023-10-24T17:58:29.934Z] [hosting] hash cache [cHVibGlj] stored for 3 files
[debug] [2023-10-24T17:58:29.935Z] [hosting][hash queue][FINAL] {"max":0,"min":0,"avg":0,"active":0,"complete":3,"success":3,"errored":0,"retried":0,"total":3,"elapsed":3}
[debug] [2023-10-24T17:58:29.935Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/bb0f8f16ae2da177:populateFiles [none]
[debug] [2023-10-24T17:58:29.935Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/bb0f8f16ae2da177:populateFiles {"files":{"/404.html":"05cbc6f94d7a69ce2e29646eab13be2c884e61ba93e3094df5028866876d18b3","/apple-app-site-association.json":"ed96e7f11a450905e5392238ead7509ba612fe0aac905baecc75cc5e0577fc05","/index.html":"d214aae81e8d3e872b168d47bd7055ff176e1e50117eacb830d5498a31e05311"}}
[debug] [2023-10-24T17:58:30.369Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/bb0f8f16ae2da177:populateFiles 200
[debug] [2023-10-24T17:58:30.369Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/224436038053/sites/virtual-menu-59b9e/versions/bb0f8f16ae2da177:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/virtual-menu-59b9e/versions/bb0f8f16ae2da177/files"}
[debug] [2023-10-24T17:58:30.370Z] [hosting][populate queue][FINAL] {"max":438,"min":438,"avg":438,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":438}
[debug] [2023-10-24T17:58:30.370Z] [hosting] uploads queued: 0
[debug] [2023-10-24T17:58:30.370Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1698170310370}
[info] i  hosting: upload complete 
[info] ✔  hosting[virtual-menu-59b9e]: file upload complete 
[debug] [2023-10-24T17:58:30.371Z] [hosting] deploy completed after 447ms
[info] i  functions: updating Node.js 10 (1st Gen) function addBusinessEmail(us-central1)... 
[debug] [2023-10-24T17:58:30.377Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CenvironmentVariables%2CavailableMemoryMb%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2023-10-24T17:58:30.377Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"name":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail","sourceUploadUrl":"https://storage.googleapis.com/uploads-615119301633.us-central1.cloudfunctions.appspot.com/dbd79205-d240-4d34-9446-e80356221867.zip?GoogleAccessId=service-224436038053@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698172109&Signature=W6JTsEVXysDDQjp%2FTxBGgy3Y6s1%2BwDu1AemkIK7ZSZIkvAJGIKoEH9ktWy1zwEob2q%2Bp22iRxL3KPRdRgzU5WrwQEbaAB9Udox8LRt9EY8PWFDnTTCmOFf%2BuUMqbIIe1ZksEayo9vzlvxFUO48FY3%2B3n2tpu2ad4DLLeNEdD9SFHUrB8RcKEaa4bcODUgjrngmruC8c%2B5dALst3i0QL2JEq0Bm7XGYldbARCbqPhbHm%2BSW0ITcLYmmFlkUJzCVq8m0siW6OvcTaqusQ8CkZb6c71b758ilyOvUiQka9TFF2HbJzWNhu8xplr59ox%2BQt9hJAxCndjBzirSpUsBi4zjQ%3D%3D","entryPoint":"addBusinessEmail","runtime":"nodejs10","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"29cddf50faea11bb094f20e38ab5b370324008e1"},"httpsTrigger":{"securityLevel":"SECURE_OPTIONAL"},"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"virtual-menu-59b9e","EVENTARC_CLOUD_EVENT_SOURCE":"projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"},"availableMemoryMb":256,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2023-10-24T17:58:31.019Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 403
[debug] [2023-10-24T17:58:31.020Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] ⚠  functions: failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail 
[error] Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail
[debug] [2023-10-24T17:58:31.030Z] Total Function Deployment time: 648
[debug] [2023-10-24T17:58:31.031Z] 1 Functions Deployed
[debug] [2023-10-24T17:58:31.031Z] 1 Functions Errored
[debug] [2023-10-24T17:58:31.031Z] 0 Function Deployments Aborted
[debug] [2023-10-24T17:58:31.031Z] Average Function Deployment time: 647
[info] 
[info] Functions deploy had errors with the following functions:
	addBusinessEmail(us-central1)
[debug] [2023-10-24T17:58:31.089Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2023-10-24T17:58:31.091Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email [none]
[debug] [2023-10-24T17:58:31.092Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-24T17:58:31.991Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-24T17:58:31.991Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-24T17:58:31.991Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-24T17:58:31.992Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email 403
[debug] [2023-10-24T17:58:31.992Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts/packages/add_business_email {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #virtual-menu-59b9e by visiting https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=virtual-menu-59b9e"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/virtual-menu-59b9e","service":"artifactregistry.googleapis.com"}}]}}
[debug] [2023-10-24T17:58:31.993Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-24T17:58:32.519Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-24T17:58:32.519Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-24T17:58:32.519Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[debug] [2023-10-24T17:58:32.620Z] >>> [apiv2][query] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list [none]
[debug] [2023-10-24T17:58:33.568Z] <<< [apiv2][status] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list 403
[debug] [2023-10-24T17:58:33.568Z] <<< [apiv2][body] GET https://us.gcr.io/v2/virtual-menu-59b9e/gcf/us-central1/tags/list {"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}]}
[debug] [2023-10-24T17:58:33.569Z] Failed docker command with error  HTTP Error: 403, Unknown Error {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"DENIED","message":"Failed to read tags for host 'us.gcr.io', repository '/v2/virtual-menu-59b9e/gcf/us-central1/tags/list'"}],"error":{"message":"Unknown Error"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, Unknown Error","status":403}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at
	https://console.cloud.google.com/artifacts/docker/virtual-menu-59b9e/us-central1/gcf-artifacts
	https://console.cloud.google.com/gcr/images/virtual-menu-59b9e/us/gcf 
[debug] [2023-10-24T17:58:33.569Z] Functions deploy failed.
[debug] [2023-10-24T17:58:33.570Z] {
  "endpoint": {
    "id": "addBusinessEmail",
    "project": "virtual-menu-59b9e",
    "region": "us-central1",
    "entryPoint": "addBusinessEmail",
    "platform": "gcfv1",
    "runtime": "nodejs10",
    "httpsTrigger": {},
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"virtual-menu-59b9e\",\"databaseURL\":\"https://virtual-menu-59b9e.firebaseio.com\",\"storageBucket\":\"virtual-menu-59b9e.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "virtual-menu-59b9e",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "codebase": "default",
    "availableMemoryMb": 256,
    "securityLevel": "SECURE_OPTIONAL",
    "targetedByOnly": false,
    "hash": "29cddf50faea11bb094f20e38ab5b370324008e1",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail"
    },
    "exit": 1,
    "message": "Failed to update function projects/virtual-menu-59b9e/locations/us-central1/functions/addBusinessEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/virtual-menu-59b9e/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2023-10-24T17:58:34.124Z] Error: Failed to update function addBusinessEmail in region us-central1
    at /Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:347:32)
    at async Fabricator.updateEndpoint (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:151:13)
    at async handle (/Users/rohantyagi/.npm-global/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
